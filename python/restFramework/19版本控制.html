<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>版本控制 | FeelingLive</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/assets/img/logo/logo.png">
    <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?966c32065299cfcd0ae5ae2eae1aa280";
              var s = document.getElementsByTagName("script")[0]; 
              s.parentNode.insertBefore(hm, s);
            })();            
          </script>
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.57bcb71c.css" as="style"><link rel="preload" href="/assets/js/app.b8069efc.js" as="script"><link rel="preload" href="/assets/js/2.463f0d24.js" as="script"><link rel="preload" href="/assets/js/31.9d1301f0.js" as="script"><link rel="prefetch" href="/assets/js/10.0762cba9.js"><link rel="prefetch" href="/assets/js/11.4708d5da.js"><link rel="prefetch" href="/assets/js/12.c6cafa54.js"><link rel="prefetch" href="/assets/js/13.d8200bdf.js"><link rel="prefetch" href="/assets/js/14.8064c10f.js"><link rel="prefetch" href="/assets/js/15.9243c1a6.js"><link rel="prefetch" href="/assets/js/16.f6f1013c.js"><link rel="prefetch" href="/assets/js/17.fc230ff5.js"><link rel="prefetch" href="/assets/js/18.f5401d4b.js"><link rel="prefetch" href="/assets/js/19.97ad76e6.js"><link rel="prefetch" href="/assets/js/20.c04d5e36.js"><link rel="prefetch" href="/assets/js/21.3a377e15.js"><link rel="prefetch" href="/assets/js/22.4f0e9918.js"><link rel="prefetch" href="/assets/js/23.8f5b85c7.js"><link rel="prefetch" href="/assets/js/24.e0dea9d9.js"><link rel="prefetch" href="/assets/js/25.6e5a4514.js"><link rel="prefetch" href="/assets/js/26.f1eb71b3.js"><link rel="prefetch" href="/assets/js/27.648fe148.js"><link rel="prefetch" href="/assets/js/28.0f4106c7.js"><link rel="prefetch" href="/assets/js/29.13fab01e.js"><link rel="prefetch" href="/assets/js/3.42c89626.js"><link rel="prefetch" href="/assets/js/30.776c58af.js"><link rel="prefetch" href="/assets/js/32.720f8e3c.js"><link rel="prefetch" href="/assets/js/33.3e536bad.js"><link rel="prefetch" href="/assets/js/34.eb929122.js"><link rel="prefetch" href="/assets/js/35.d6c75691.js"><link rel="prefetch" href="/assets/js/36.d1359dcd.js"><link rel="prefetch" href="/assets/js/37.af9dcad6.js"><link rel="prefetch" href="/assets/js/38.4dcdfb0e.js"><link rel="prefetch" href="/assets/js/39.a11a56c7.js"><link rel="prefetch" href="/assets/js/4.32e9b2cd.js"><link rel="prefetch" href="/assets/js/40.99b7368a.js"><link rel="prefetch" href="/assets/js/41.6b4e41f7.js"><link rel="prefetch" href="/assets/js/42.01f4bb4d.js"><link rel="prefetch" href="/assets/js/43.395f4458.js"><link rel="prefetch" href="/assets/js/44.6ffa66fa.js"><link rel="prefetch" href="/assets/js/45.e29df2ce.js"><link rel="prefetch" href="/assets/js/46.72ff2f55.js"><link rel="prefetch" href="/assets/js/47.8ffb0064.js"><link rel="prefetch" href="/assets/js/48.2ca0eabc.js"><link rel="prefetch" href="/assets/js/49.9b2c63ae.js"><link rel="prefetch" href="/assets/js/5.92edf24a.js"><link rel="prefetch" href="/assets/js/50.115e85f5.js"><link rel="prefetch" href="/assets/js/51.8f5cbf89.js"><link rel="prefetch" href="/assets/js/52.4a6fde6e.js"><link rel="prefetch" href="/assets/js/53.b63a6ed6.js"><link rel="prefetch" href="/assets/js/54.fbb07875.js"><link rel="prefetch" href="/assets/js/55.e995daf3.js"><link rel="prefetch" href="/assets/js/56.15951fbe.js"><link rel="prefetch" href="/assets/js/57.4c91e795.js"><link rel="prefetch" href="/assets/js/58.02114ca3.js"><link rel="prefetch" href="/assets/js/6.0b766ead.js"><link rel="prefetch" href="/assets/js/7.beb00bfa.js"><link rel="prefetch" href="/assets/js/8.e469995f.js"><link rel="prefetch" href="/assets/js/9.35927e25.js">
    <link rel="stylesheet" href="/assets/css/0.styles.57bcb71c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo/logo.png" alt="FeelingLive" class="logo"> <span class="site-name">FeelingLive</span></a> <nav class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <ul class="nav-links can-hide"><li class="nav-item"><a href="/" class="nav-link"><!----> <span>主页</span></a></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><!----> <span class="title">
      Python
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Python" class="mobile-dropdown-title"><!----> <span class="title">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/coroutine/" class="nav-link"><!----> <span>协程</span></a></li><li class="dropdown-item"><!----> <a href="/python/advance/" class="nav-link"><!----> <span>进阶</span></a></li><li class="dropdown-item"><!----> <a href="/python/standard/" class="nav-link"><!----> <span>标准库</span></a></li><li class="dropdown-item"><!----> <a href="/python/restFramework/" class="nav-link router-link-active"><!----> <span>REST Framework</span></a></li><li class="dropdown-item"><!----> <a href="/python/utils/" class="nav-link"><!----> <span>各种工具</span></a></li><li class="dropdown-item"><!----> <a href="/python/skill/" class="nav-link"><!----> <span>使用技巧和例子</span></a></li></ul></div></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title">
      Java
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><!----> <span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/basis/" class="nav-link"><!----> <span>基础</span></a></li></ul></div></li><li class="nav-item"><a href="/linux/" class="nav-link"><!----> <span>Linux</span></a></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title">
      中间件
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><!----> <span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/middle/elasticsearch/" class="nav-link"><!----> <span>Elasticsearch</span></a></li><li class="dropdown-item"><!----> <a href="/middle/nginx/" class="nav-link"><!----> <span>Nginx</span></a></li><li class="dropdown-item"><!----> <a href="/middle/kafka/" class="nav-link"><!----> <span>Kafka</span></a></li><li class="dropdown-item"><!----> <a href="/middle/f5/" class="nav-link"><!----> <span>F5</span></a></li></ul></div></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title">
      数据库
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><!----> <span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/database/mysql/" class="nav-link"><!----> <span>MySQL</span></a></li><li class="dropdown-item"><!----> <a href="/database/redis/" class="nav-link"><!----> <span>Redis</span></a></li></ul></div></li><li class="nav-item"><a href="https://github.com/xuqil" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----> <span>Git Hub</span> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <!----></ul> <div class="theme-switcher"><a class="switch dark"><span><i aria-hidden="true" class="fa fa-moon"></i></span></a></div></nav></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <ul class="nav-links"><li class="nav-item"><a href="/" class="nav-link"><!----> <span>主页</span></a></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><!----> <span class="title">
      Python
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Python" class="mobile-dropdown-title"><!----> <span class="title">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/coroutine/" class="nav-link"><!----> <span>协程</span></a></li><li class="dropdown-item"><!----> <a href="/python/advance/" class="nav-link"><!----> <span>进阶</span></a></li><li class="dropdown-item"><!----> <a href="/python/standard/" class="nav-link"><!----> <span>标准库</span></a></li><li class="dropdown-item"><!----> <a href="/python/restFramework/" class="nav-link router-link-active"><!----> <span>REST Framework</span></a></li><li class="dropdown-item"><!----> <a href="/python/utils/" class="nav-link"><!----> <span>各种工具</span></a></li><li class="dropdown-item"><!----> <a href="/python/skill/" class="nav-link"><!----> <span>使用技巧和例子</span></a></li></ul></div></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title">
      Java
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><!----> <span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/basis/" class="nav-link"><!----> <span>基础</span></a></li></ul></div></li><li class="nav-item"><a href="/linux/" class="nav-link"><!----> <span>Linux</span></a></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title">
      中间件
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><!----> <span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/middle/elasticsearch/" class="nav-link"><!----> <span>Elasticsearch</span></a></li><li class="dropdown-item"><!----> <a href="/middle/nginx/" class="nav-link"><!----> <span>Nginx</span></a></li><li class="dropdown-item"><!----> <a href="/middle/kafka/" class="nav-link"><!----> <span>Kafka</span></a></li><li class="dropdown-item"><!----> <a href="/middle/f5/" class="nav-link"><!----> <span>F5</span></a></li></ul></div></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title">
      数据库
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><!----> <span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/database/mysql/" class="nav-link"><!----> <span>MySQL</span></a></li><li class="dropdown-item"><!----> <a href="/database/redis/" class="nav-link"><!----> <span>Redis</span></a></li></ul></div></li><li class="nav-item"><a href="https://github.com/xuqil" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----> <span>Git Hub</span> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <!----></ul>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><i></i> <span>RESTFramework</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/python/restFramework/" aria-current="page" class="sidebar-link">要求</a></li><li><a href="/python/restFramework/10序列化器字段.html" class="sidebar-link">序列化器字段</a></li><li><a href="/python/restFramework/11序列化器关系.html" class="sidebar-link">序列化器关系</a></li><li><a href="/python/restFramework/12验证器.html" class="sidebar-link">验证者</a></li><li><a href="/python/restFramework/13身份验证.html" class="sidebar-link">认证方式</a></li><li><a href="/python/restFramework/14权限.html" class="sidebar-link">权限</a></li><li><a href="/python/restFramework/15缓存.html" class="sidebar-link">快取</a></li><li><a href="/python/restFramework/16节流.html" class="sidebar-link">节流</a></li><li><a href="/python/restFramework/17筛选.html" class="sidebar-link">筛选</a></li><li><a href="/python/restFramework/18分页.html" class="sidebar-link">分页</a></li><li><a href="/python/restFramework/19版本控制.html" class="active sidebar-link">版本控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/restFramework/19版本控制.html#rest框架的版本控制" class="sidebar-link">REST框架的版本控制</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/19版本控制.html#配置版本控制方案" class="sidebar-link">配置版本控制方案</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/19版本控制.html#acceptheaderversioning" class="sidebar-link">AcceptHeaderVersioning</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/19版本控制.html#urlpathversioning" class="sidebar-link">URLPathVersioning</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/19版本控制.html#命名空间版本" class="sidebar-link">命名空间版本</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/19版本控制.html#主机名版本" class="sidebar-link">主机名版本</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/19版本控制.html#queryparameterversioning" class="sidebar-link">QueryParameterVersioning</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/19版本控制.html#例" class="sidebar-link">例</a></li></ul></li><li><a href="/python/restFramework/1请求.html" class="sidebar-link">Requests</a></li><li><a href="/python/restFramework/20内容协商.html" class="sidebar-link">内容协商</a></li><li><a href="/python/restFramework/21元数据.html" class="sidebar-link">元数据</a></li><li><a href="/python/restFramework/22架构.html" class="sidebar-link">架构图</a></li><li><a href="/python/restFramework/23格式后缀.html" class="sidebar-link">格式后缀</a></li><li><a href="/python/restFramework/24返回URL.html" class="sidebar-link">返回网址</a></li><li><a href="/python/restFramework/25异常.html" class="sidebar-link">例外情况</a></li><li><a href="/python/restFramework/26状态码.html" class="sidebar-link">状态码</a></li><li><a href="/python/restFramework/27测试.html" class="sidebar-link">测试中</a></li><li><a href="/python/restFramework/28设置.html" class="sidebar-link">设定值</a></li><li><a href="/python/restFramework/2响应.html" class="sidebar-link">Responses</a></li><li><a href="/python/restFramework/3视图..html" class="sidebar-link">基于类的视图</a></li><li><a href="/python/restFramework/4通用视图.html" class="sidebar-link">通用视图</a></li><li><a href="/python/restFramework/5视图集.html" class="sidebar-link">ViewSets</a></li><li><a href="/python/restFramework/6路由.html" class="sidebar-link">Routers</a></li><li><a href="/python/restFramework/7解析器.html" class="sidebar-link">解析器(Parsers)</a></li><li><a href="/python/restFramework/8渲染器.html" class="sidebar-link">渲染器</a></li><li><a href="/python/restFramework/9序列化器.html" class="sidebar-link">Serializers</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-vpx-content content__default"><h1 id="版本控制"><a href="#版本控制" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/versioning/#versioning" target="_blank" rel="noopener noreferrer">版本控制<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h1> <blockquote><p>对接口进行版本控制只是杀死已部署客户端的“礼貌”方式。</p> <p>— <a href="https://www.slideshare.net/evolve_conference/201308-fielding-evolve/31" target="_blank" rel="noopener noreferrer">罗伊·菲尔丁<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>（<a href="https://www.slideshare.net/evolve_conference/201308-fielding-evolve/31" target="_blank" rel="noopener noreferrer">Roy Fielding）<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p></blockquote> <p>API版本控制使您可以更改不同客户端之间的行为。REST框架提供了许多不同的版本控制方案。</p> <p>版本控制由传入的客户端请求确定，并且可以基于请求URL或基于请求标头。</p> <p>存在许多有效的版本控制方法。<a href="https://www.infoq.com/articles/roy-fielding-on-versioning" target="_blank" rel="noopener noreferrer">非版本化的系统也可能适用<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，特别是如果您要为非常长期的系统进行工程设计时，有多个客户端不在您的控制范围内。</p> <h2 id="rest框架的版本控制"><a href="#rest框架的版本控制" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/versioning/#versioning-with-rest-framework" target="_blank" rel="noopener noreferrer">REST框架的版本控制<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>启用API版本控制后，该<code>request.version</code>属性将包含一个字符串，该字符串与传入客户端请求中请求的版本相对应。</p> <p>默认情况下，版本控制未启用，并且<code>request.version</code>将始终返回<code>None</code>。</p> <h4 id="根据版本的不同行为"><a href="#根据版本的不同行为" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/versioning/#varying-behavior-based-on-the-version" target="_blank" rel="noopener noreferrer">根据版本的不同行为<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p>如何改变API的行为由您决定，但是您通常希望的一个示例是在较新的版本中切换到另一种序列化样式。例如：</p> <div class="language- extra-class"><pre class="language-text"><code>def get_serializer_class(self):
    if self.request.version == 'v1':
        return AccountSerializerVersion1
    return AccountSerializer
</code></pre></div><h4 id="反转版本api的url"><a href="#反转版本api的url" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/versioning/#reversing-urls-for-versioned-apis" target="_blank" rel="noopener noreferrer">反转版本API的URL<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p><code>reverse</code>REST框架包含的功能与版本控制方案相关联。您需要确保将current <code>request</code>作为关键字参数包含进来，就像这样。</p> <div class="language- extra-class"><pre class="language-text"><code>from rest_framework.reverse import reverse

reverse('bookings-list', request=request)
</code></pre></div><p>上面的函数将适用于请求版本的所有URL转换。例如：</p> <ul><li>如果<code>NamespaceVersioning</code>正在使用，并且API版本为“ v1”，则使用的URL查找将为<code>'v1:bookings-list'</code>，它可能会解析为<code>http://example.org/v1/bookings/</code>。</li> <li>如果<code>QueryParameterVersioning</code>正在使用，并且API版本为<code>1.0</code>，则返回的URL可能类似于<code>http://example.org/bookings/?version=1.0</code></li></ul> <h4 id="版本化的api和超链接的序列化器"><a href="#版本化的api和超链接的序列化器" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/versioning/#versioned-apis-and-hyperlinked-serializers" target="_blank" rel="noopener noreferrer">版本化的API和超链接的序列化器<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p>当使用超链接的序列化样式以及基于URL的版本控制方案时，请确保将请求作为上下文包含到序列化器中。</p> <div class="language- extra-class"><pre class="language-text"><code>def get(self, request):
    queryset = Booking.objects.all()
    serializer = BookingsSerializer(queryset, many=True, context={'request': request})
    return Response({'all_bookings': serializer.data})
</code></pre></div><p>这样做将允许所有返回的URL包含适当的版本控制。</p> <h2 id="配置版本控制方案"><a href="#配置版本控制方案" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/versioning/#configuring-the-versioning-scheme" target="_blank" rel="noopener noreferrer">配置版本控制方案<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>版本<code>DEFAULT_VERSIONING_CLASS</code>设置方案由设置键定义。</p> <div class="language- extra-class"><pre class="language-text"><code>REST_FRAMEWORK = {
    'DEFAULT_VERSIONING_CLASS': 'rest_framework.versioning.NamespaceVersioning'
}
</code></pre></div><p>除非明确设置，该值<code>DEFAULT_VERSIONING_CLASS</code>将是<code>None</code>。在这种情况下，<code>request.version</code>属性将始终返回<code>None</code>。</p> <p>您还可以在单个视图上设置版本控制方案。通常，您不需要这样做，因为在全局范围内使用单个版本控制方案会更有意义。如果确实需要这样做，请使用该<code>versioning_class</code>属性。</p> <div class="language- extra-class"><pre class="language-text"><code>class ProfileList(APIView):
    versioning_class = versioning.QueryParameterVersioning
</code></pre></div><h4 id="其他版本控制设置"><a href="#其他版本控制设置" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/versioning/#other-versioning-settings" target="_blank" rel="noopener noreferrer">其他版本控制设置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p>以下设置键还用于控制版本控制：</p> <ul><li><code>DEFAULT_VERSION</code>。<code>request.version</code>不存在版本信息时应使用的值。默认为<code>None</code>。</li> <li><code>ALLOWED_VERSIONS</code>。如果设置，则此值将限制版本控制方案可能返回的版本集，并且如果提供的版本不在此版本集中，则会引发错误。请注意，用于<code>DEFAULT_VERSION</code>设置的值始终被认为是<code>ALLOWED_VERSIONS</code>集合的一部分（除非它是<code>None</code>）。默认为<code>None</code>。</li> <li><code>VERSION_PARAM</code>。任何版本控制参数都应使用的字符串，例如媒体类型或URL查询参数。默认为<code>'version'</code>。</li></ul> <p>您还可以设置你的版本类加上这三个值在每个视图或每个视图集基础上定义自己的版本控制方案和使用<code>default_version</code>，<code>allowed_versions</code>以及<code>version_param</code>类变量。例如，如果要使用<code>URLPathVersioning</code>：</p> <div class="language- extra-class"><pre class="language-text"><code>from rest_framework.versioning import URLPathVersioning
from rest_framework.views import APIView

class ExampleVersioning(URLPathVersioning):
    default_version = ...
    allowed_versions = ...
    version_param = ...

class ExampleView(APIVIew):
    versioning_class = ExampleVersioning
</code></pre></div><hr> <h1 id="api参考"><a href="#api参考" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/versioning/#api-reference" target="_blank" rel="noopener noreferrer">API参考<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h1> <h2 id="acceptheaderversioning"><a href="#acceptheaderversioning" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/versioning/#acceptheaderversioning" target="_blank" rel="noopener noreferrer">AcceptHeaderVersioning<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>此方案要求客户端在<code>Accept</code>标头中指定版本作为媒体类型的一部分。该版本作为媒体类型参数包括在内，它是对主要媒体类型的补充。</p> <p>这是一个使用accept标头版本控制样式的HTTP请求示例。</p> <div class="language- extra-class"><pre class="language-text"><code>GET /bookings/ HTTP/1.1
Host: example.com
Accept: application/json; version=1.0
</code></pre></div><p>在示例中，上面的request <code>request.version</code>属性将返回字符串<code>'1.0'</code>。</p> <p>版本基础上接受头部被<a href="http://blog.steveklabnik.com/posts/2011-07-03-nobody-understands-rest-or-http#i_want_my_api_to_be_versioned" target="_blank" rel="noopener noreferrer">普遍认为<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>是<a href="https://github.com/interagent/http-api-design/blob/master/en/foundations/require-versioning-in-the-accepts-header.md" target="_blank" rel="noopener noreferrer">最好的做法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，但其他样式可能会根据您的客户的需求是合适的。</p> <h4 id="对供应商媒体类型使用接受标头"><a href="#对供应商媒体类型使用接受标头" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/versioning/#using-accept-headers-with-vendor-media-types" target="_blank" rel="noopener noreferrer">对供应商媒体类型使用接受标头<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p>严格来说，<code>json</code>没有将媒体类型指定为<a href="https://tools.ietf.org/html/rfc4627#section-6" target="_blank" rel="noopener noreferrer">包含其他参数<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。如果您要构建指定明确的公共API，则可以考虑使用<a href="https://en.wikipedia.org/wiki/Internet_media_type#Vendor_tree" target="_blank" rel="noopener noreferrer">供应商媒体类型<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。为此，将渲染器配置为使用具有自定义媒体类型的基于JSON的渲染器：</p> <div class="language- extra-class"><pre class="language-text"><code>class BookingsAPIRenderer(JSONRenderer):
    media_type = 'application/vnd.megacorp.bookings+json'
</code></pre></div><p>您的客户请求现在看起来像这样：</p> <div class="language- extra-class"><pre class="language-text"><code>GET /bookings/ HTTP/1.1
Host: example.com
Accept: application/vnd.megacorp.bookings+json; version=1.0
</code></pre></div><h2 id="urlpathversioning"><a href="#urlpathversioning" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/versioning/#urlpathversioning" target="_blank" rel="noopener noreferrer">URLPathVersioning<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>此方案要求客户端将版本指定为URL路径的一部分。</p> <div class="language- extra-class"><pre class="language-text"><code>GET /v1/bookings/ HTTP/1.1
Host: example.com
Accept: application/json
</code></pre></div><p>您的URL conf必须包含一个与版本和<code>'version'</code>关键字参数匹配的模式，以便此信息可用于版本控制方案。</p> <div class="language- extra-class"><pre class="language-text"><code>urlpatterns = [
    re_path(
        r'^(?P&lt;version&gt;(v1|v2))/bookings/$',
        bookings_list,
        name='bookings-list'
    ),
    re_path(
        r'^(?P&lt;version&gt;(v1|v2))/bookings/(?P&lt;pk&gt;[0-9]+)/$',
        bookings_detail,
        name='bookings-detail'
    )
]
</code></pre></div><h2 id="命名空间版本"><a href="#命名空间版本" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/versioning/#namespaceversioning" target="_blank" rel="noopener noreferrer">命名空间版本<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>对于客户而言，此方案与相同<code>URLPathVersioning</code>。唯一的区别是它在Django应用程序中的配置方式，因为它使用URL名称间隔而不是URL关键字参数。</p> <div class="language- extra-class"><pre class="language-text"><code>GET /v1/something/ HTTP/1.1
Host: example.com
Accept: application/json
</code></pre></div><p>使用此方案，<code>request.version</code>将根据<code>namespace</code>与传入请求路径匹配的属性来确定属性。</p> <p>在以下示例中，我们为一组视图提供了两个不同的可能的URL前缀，每个前缀都在不同的命名空间下：</p> <div class="language- extra-class"><pre class="language-text"><code># bookings/urls.py
urlpatterns = [
    re_path(r'^$', bookings_list, name='bookings-list'),
    re_path(r'^(?P&lt;pk&gt;[0-9]+)/$', bookings_detail, name='bookings-detail')
]

# urls.py
urlpatterns = [
    re_path(r'^v1/bookings/', include('bookings.urls', namespace='v1')),
    re_path(r'^v2/bookings/', include('bookings.urls', namespace='v2'))
]
</code></pre></div><p>如果只需要简单的版本控制方案<code>URLPathVersioning</code>，<code>NamespaceVersioning</code>则两者和都是合理的。该<code>URLPathVersioning</code>方法可能更适合于小型临时项目，<code>NamespaceVersioning</code>对于大型项目可能更易于管理。</p> <h2 id="主机名版本"><a href="#主机名版本" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/versioning/#hostnameversioning" target="_blank" rel="noopener noreferrer">主机名版本<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>主机名版本控制方案要求客户端在URL中指定请求的版本作为主机名的一部分。</p> <p>例如，以下是对<code>http://v1.example.com/bookings/</code>URL 的HTTP请求：</p> <div class="language- extra-class"><pre class="language-text"><code>GET /bookings/ HTTP/1.1
Host: v1.example.com
Accept: application/json
</code></pre></div><p>默认情况下，此实现期望主机名与以下简单正则表达式匹配：</p> <div class="language- extra-class"><pre class="language-text"><code>^([a-zA-Z0-9]+)\.[a-zA-Z0-9]+\.[a-zA-Z0-9]+$
</code></pre></div><p>请注意，第一组括在方括号中，表明这是主机名的匹配部分。</p> <p><code>HostNameVersioning</code>在调试模式下使用该方案可能会很麻烦，因为您通常会访问原始IP地址，例如<code>127.0.0.1</code>。关于如何<a href="https://reinteractive.net/posts/199-developing-and-testing-rails-applications-with-subdomains" target="_blank" rel="noopener noreferrer">使用自定义子域访问本地主机的<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>在线教程有很多，在这种情况下，您可能会有所帮助。</p> <p>如果您有要求根据版本将传入的请求路由到其他服务器，则基于主机名的版本控制特别有用，因为您可以为不同的API版本配置不同的DNS记录。</p> <h2 id="queryparameterversioning"><a href="#queryparameterversioning" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/versioning/#queryparameterversioning" target="_blank" rel="noopener noreferrer">QueryParameterVersioning<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>此方案是一种简单的样式，其中包括版本作为URL中的查询参数。例如：</p> <div class="language- extra-class"><pre class="language-text"><code>GET /something/?version=0.1 HTTP/1.1
Host: example.com
Accept: application/json
</code></pre></div><hr> <h1 id="自定义版本控制方案"><a href="#自定义版本控制方案" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/versioning/#custom-versioning-schemes" target="_blank" rel="noopener noreferrer">自定义版本控制方案<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h1> <p>要实现自定义版本控制方案，请子类化<code>BaseVersioning</code>并重写该<code>.determine_version</code>方法。</p> <h2 id="例"><a href="#例" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/versioning/#example" target="_blank" rel="noopener noreferrer">例<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>以下示例使用自定义<code>X-API-Version</code>标头来确定请求的版本。</p> <div class="language- extra-class"><pre class="language-text"><code>class XAPIVersionScheme(versioning.BaseVersioning):
    def determine_version(self, request, *args, **kwargs):
        return request.META.get('HTTP_X_API_VERSION', None)
</code></pre></div><p>如果您的版本控制方案基于请求URL，则您还需要更改确定版本URL的方式。为此，您应该覆盖<code>.reverse()</code>该类上的方法。有关示例，请参见源代码。</p></div> <!----> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/python/restFramework/18分页.html" class="prev">
        分页
      </a></span> <span class="next"><a href="/python/restFramework/1请求.html">
        Requests
      </a>
      →
    </span></p></div> <div class="page-footer"><ul class="inner"><li>Theme by <a href="https://github.com/qcyblm/vuepress-theme-vpx" title="本站主题" target="_blank" rel="noopener noreferrer">VPX</a></li> <li>Powered by <a href="https://www.vuepress.cn/" target="_blank" rel="noopener noreferrer">VuePress</a></li> <!----> <li>
      © 2018-2021
      <a href="https://xuqilong.top" target="_blank" rel="noopener noreferrer"> Copyright © 2021-present Qilong Xu © 2019 </a></li> <li><a href="https://beian.miit.gov.cn" target="_blank" rel="noopener noreferrer"><!---->  粤ICP备19034953号-1
      </a></li> </ul></div> </main> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.b8069efc.js" defer></script><script src="/assets/js/2.463f0d24.js" defer></script><script src="/assets/js/31.9d1301f0.js" defer></script>
  </body>
</html>
