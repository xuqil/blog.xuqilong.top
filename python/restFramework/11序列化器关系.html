<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>序列化器关系 | FeelingLive</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/assets/img/logo/logo.png">
    <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?966c32065299cfcd0ae5ae2eae1aa280";
              var s = document.getElementsByTagName("script")[0]; 
              s.parentNode.insertBefore(hm, s);
            })();            
          </script>
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.57bcb71c.css" as="style"><link rel="preload" href="/assets/js/app.b8069efc.js" as="script"><link rel="preload" href="/assets/js/2.463f0d24.js" as="script"><link rel="preload" href="/assets/js/23.8f5b85c7.js" as="script"><link rel="prefetch" href="/assets/js/10.0762cba9.js"><link rel="prefetch" href="/assets/js/11.4708d5da.js"><link rel="prefetch" href="/assets/js/12.c6cafa54.js"><link rel="prefetch" href="/assets/js/13.d8200bdf.js"><link rel="prefetch" href="/assets/js/14.8064c10f.js"><link rel="prefetch" href="/assets/js/15.9243c1a6.js"><link rel="prefetch" href="/assets/js/16.f6f1013c.js"><link rel="prefetch" href="/assets/js/17.fc230ff5.js"><link rel="prefetch" href="/assets/js/18.f5401d4b.js"><link rel="prefetch" href="/assets/js/19.97ad76e6.js"><link rel="prefetch" href="/assets/js/20.c04d5e36.js"><link rel="prefetch" href="/assets/js/21.3a377e15.js"><link rel="prefetch" href="/assets/js/22.4f0e9918.js"><link rel="prefetch" href="/assets/js/24.e0dea9d9.js"><link rel="prefetch" href="/assets/js/25.6e5a4514.js"><link rel="prefetch" href="/assets/js/26.f1eb71b3.js"><link rel="prefetch" href="/assets/js/27.648fe148.js"><link rel="prefetch" href="/assets/js/28.0f4106c7.js"><link rel="prefetch" href="/assets/js/29.13fab01e.js"><link rel="prefetch" href="/assets/js/3.42c89626.js"><link rel="prefetch" href="/assets/js/30.776c58af.js"><link rel="prefetch" href="/assets/js/31.9d1301f0.js"><link rel="prefetch" href="/assets/js/32.720f8e3c.js"><link rel="prefetch" href="/assets/js/33.3e536bad.js"><link rel="prefetch" href="/assets/js/34.eb929122.js"><link rel="prefetch" href="/assets/js/35.d6c75691.js"><link rel="prefetch" href="/assets/js/36.d1359dcd.js"><link rel="prefetch" href="/assets/js/37.af9dcad6.js"><link rel="prefetch" href="/assets/js/38.4dcdfb0e.js"><link rel="prefetch" href="/assets/js/39.a11a56c7.js"><link rel="prefetch" href="/assets/js/4.32e9b2cd.js"><link rel="prefetch" href="/assets/js/40.99b7368a.js"><link rel="prefetch" href="/assets/js/41.6b4e41f7.js"><link rel="prefetch" href="/assets/js/42.01f4bb4d.js"><link rel="prefetch" href="/assets/js/43.395f4458.js"><link rel="prefetch" href="/assets/js/44.6ffa66fa.js"><link rel="prefetch" href="/assets/js/45.e29df2ce.js"><link rel="prefetch" href="/assets/js/46.72ff2f55.js"><link rel="prefetch" href="/assets/js/47.8ffb0064.js"><link rel="prefetch" href="/assets/js/48.2ca0eabc.js"><link rel="prefetch" href="/assets/js/49.9b2c63ae.js"><link rel="prefetch" href="/assets/js/5.92edf24a.js"><link rel="prefetch" href="/assets/js/50.115e85f5.js"><link rel="prefetch" href="/assets/js/51.8f5cbf89.js"><link rel="prefetch" href="/assets/js/52.4a6fde6e.js"><link rel="prefetch" href="/assets/js/53.b63a6ed6.js"><link rel="prefetch" href="/assets/js/54.fbb07875.js"><link rel="prefetch" href="/assets/js/55.e995daf3.js"><link rel="prefetch" href="/assets/js/56.15951fbe.js"><link rel="prefetch" href="/assets/js/57.4c91e795.js"><link rel="prefetch" href="/assets/js/58.02114ca3.js"><link rel="prefetch" href="/assets/js/6.0b766ead.js"><link rel="prefetch" href="/assets/js/7.beb00bfa.js"><link rel="prefetch" href="/assets/js/8.e469995f.js"><link rel="prefetch" href="/assets/js/9.35927e25.js">
    <link rel="stylesheet" href="/assets/css/0.styles.57bcb71c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo/logo.png" alt="FeelingLive" class="logo"> <span class="site-name">FeelingLive</span></a> <nav class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <ul class="nav-links can-hide"><li class="nav-item"><a href="/" class="nav-link"><!----> <span>主页</span></a></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><!----> <span class="title">
      Python
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Python" class="mobile-dropdown-title"><!----> <span class="title">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/coroutine/" class="nav-link"><!----> <span>协程</span></a></li><li class="dropdown-item"><!----> <a href="/python/advance/" class="nav-link"><!----> <span>进阶</span></a></li><li class="dropdown-item"><!----> <a href="/python/standard/" class="nav-link"><!----> <span>标准库</span></a></li><li class="dropdown-item"><!----> <a href="/python/restFramework/" class="nav-link router-link-active"><!----> <span>REST Framework</span></a></li><li class="dropdown-item"><!----> <a href="/python/utils/" class="nav-link"><!----> <span>各种工具</span></a></li><li class="dropdown-item"><!----> <a href="/python/skill/" class="nav-link"><!----> <span>使用技巧和例子</span></a></li></ul></div></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title">
      Java
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><!----> <span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/basis/" class="nav-link"><!----> <span>基础</span></a></li></ul></div></li><li class="nav-item"><a href="/linux/" class="nav-link"><!----> <span>Linux</span></a></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title">
      中间件
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><!----> <span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/middle/elasticsearch/" class="nav-link"><!----> <span>Elasticsearch</span></a></li><li class="dropdown-item"><!----> <a href="/middle/nginx/" class="nav-link"><!----> <span>Nginx</span></a></li><li class="dropdown-item"><!----> <a href="/middle/kafka/" class="nav-link"><!----> <span>Kafka</span></a></li><li class="dropdown-item"><!----> <a href="/middle/f5/" class="nav-link"><!----> <span>F5</span></a></li></ul></div></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title">
      数据库
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><!----> <span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/database/mysql/" class="nav-link"><!----> <span>MySQL</span></a></li><li class="dropdown-item"><!----> <a href="/database/redis/" class="nav-link"><!----> <span>Redis</span></a></li></ul></div></li><li class="nav-item"><a href="https://github.com/xuqil" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----> <span>Git Hub</span> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <!----></ul> <div class="theme-switcher"><a class="switch dark"><span><i aria-hidden="true" class="fa fa-moon"></i></span></a></div></nav></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <ul class="nav-links"><li class="nav-item"><a href="/" class="nav-link"><!----> <span>主页</span></a></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><!----> <span class="title">
      Python
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Python" class="mobile-dropdown-title"><!----> <span class="title">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/coroutine/" class="nav-link"><!----> <span>协程</span></a></li><li class="dropdown-item"><!----> <a href="/python/advance/" class="nav-link"><!----> <span>进阶</span></a></li><li class="dropdown-item"><!----> <a href="/python/standard/" class="nav-link"><!----> <span>标准库</span></a></li><li class="dropdown-item"><!----> <a href="/python/restFramework/" class="nav-link router-link-active"><!----> <span>REST Framework</span></a></li><li class="dropdown-item"><!----> <a href="/python/utils/" class="nav-link"><!----> <span>各种工具</span></a></li><li class="dropdown-item"><!----> <a href="/python/skill/" class="nav-link"><!----> <span>使用技巧和例子</span></a></li></ul></div></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title">
      Java
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><!----> <span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/basis/" class="nav-link"><!----> <span>基础</span></a></li></ul></div></li><li class="nav-item"><a href="/linux/" class="nav-link"><!----> <span>Linux</span></a></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title">
      中间件
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><!----> <span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/middle/elasticsearch/" class="nav-link"><!----> <span>Elasticsearch</span></a></li><li class="dropdown-item"><!----> <a href="/middle/nginx/" class="nav-link"><!----> <span>Nginx</span></a></li><li class="dropdown-item"><!----> <a href="/middle/kafka/" class="nav-link"><!----> <span>Kafka</span></a></li><li class="dropdown-item"><!----> <a href="/middle/f5/" class="nav-link"><!----> <span>F5</span></a></li></ul></div></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title">
      数据库
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><!----> <span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/database/mysql/" class="nav-link"><!----> <span>MySQL</span></a></li><li class="dropdown-item"><!----> <a href="/database/redis/" class="nav-link"><!----> <span>Redis</span></a></li></ul></div></li><li class="nav-item"><a href="https://github.com/xuqil" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----> <span>Git Hub</span> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <!----></ul>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><i></i> <span>RESTFramework</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/python/restFramework/" aria-current="page" class="sidebar-link">要求</a></li><li><a href="/python/restFramework/10序列化器字段.html" class="sidebar-link">序列化器字段</a></li><li><a href="/python/restFramework/11序列化器关系.html" class="active sidebar-link">序列化器关系</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/restFramework/11序列化器关系.html#stringrelatedfield" class="sidebar-link">StringRelatedField</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/11序列化器关系.html#primarykeyrelatedfield" class="sidebar-link">PrimaryKeyRelatedField</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/11序列化器关系.html#超链接相关字段" class="sidebar-link">超链接相关字段</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/11序列化器关系.html#slugrelatedfield" class="sidebar-link">SlugRelatedField</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/11序列化器关系.html#超链接身份字段" class="sidebar-link">超链接身份字段</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/11序列化器关系.html#例" class="sidebar-link">例</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/11序列化器关系.html#可写的嵌套序列化器" class="sidebar-link">可写的嵌套序列化器</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/11序列化器关系.html#例-2" class="sidebar-link">例</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/11序列化器关系.html#例-3" class="sidebar-link">例</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/11序列化器关系.html#该queryset参数" class="sidebar-link">该queryset参数</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/11序列化器关系.html#自定义html显示" class="sidebar-link">自定义HTML显示</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/11序列化器关系.html#选择场截止" class="sidebar-link">选择场截止</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/11序列化器关系.html#反向关系" class="sidebar-link">反向关系</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/11序列化器关系.html#通用关系" class="sidebar-link">通用关系</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/11序列化器关系.html#通过模型的manytomanyfields" class="sidebar-link">通过模型的ManyToManyFields</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/11序列化器关系.html#drf嵌套路由器" class="sidebar-link">DRF嵌套路由器</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/11序列化器关系.html#其余框架的一般关系" class="sidebar-link">其余框架的一般关系</a></li></ul></li><li><a href="/python/restFramework/12验证器.html" class="sidebar-link">验证者</a></li><li><a href="/python/restFramework/13身份验证.html" class="sidebar-link">认证方式</a></li><li><a href="/python/restFramework/14权限.html" class="sidebar-link">权限</a></li><li><a href="/python/restFramework/15缓存.html" class="sidebar-link">快取</a></li><li><a href="/python/restFramework/16节流.html" class="sidebar-link">节流</a></li><li><a href="/python/restFramework/17筛选.html" class="sidebar-link">筛选</a></li><li><a href="/python/restFramework/18分页.html" class="sidebar-link">分页</a></li><li><a href="/python/restFramework/19版本控制.html" class="sidebar-link">版本控制</a></li><li><a href="/python/restFramework/1请求.html" class="sidebar-link">Requests</a></li><li><a href="/python/restFramework/20内容协商.html" class="sidebar-link">内容协商</a></li><li><a href="/python/restFramework/21元数据.html" class="sidebar-link">元数据</a></li><li><a href="/python/restFramework/22架构.html" class="sidebar-link">架构图</a></li><li><a href="/python/restFramework/23格式后缀.html" class="sidebar-link">格式后缀</a></li><li><a href="/python/restFramework/24返回URL.html" class="sidebar-link">返回网址</a></li><li><a href="/python/restFramework/25异常.html" class="sidebar-link">例外情况</a></li><li><a href="/python/restFramework/26状态码.html" class="sidebar-link">状态码</a></li><li><a href="/python/restFramework/27测试.html" class="sidebar-link">测试中</a></li><li><a href="/python/restFramework/28设置.html" class="sidebar-link">设定值</a></li><li><a href="/python/restFramework/2响应.html" class="sidebar-link">Responses</a></li><li><a href="/python/restFramework/3视图..html" class="sidebar-link">基于类的视图</a></li><li><a href="/python/restFramework/4通用视图.html" class="sidebar-link">通用视图</a></li><li><a href="/python/restFramework/5视图集.html" class="sidebar-link">ViewSets</a></li><li><a href="/python/restFramework/6路由.html" class="sidebar-link">Routers</a></li><li><a href="/python/restFramework/7解析器.html" class="sidebar-link">解析器(Parsers)</a></li><li><a href="/python/restFramework/8渲染器.html" class="sidebar-link">渲染器</a></li><li><a href="/python/restFramework/9序列化器.html" class="sidebar-link">Serializers</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-vpx-content content__default"><h1 id="序列化器关系"><a href="#序列化器关系" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#serializer-relations" target="_blank" rel="noopener noreferrer">序列化器关系<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h1> <blockquote><p>数据结构而非算法是编程的核心。</p> <p>— <a href="http://users.ece.utexas.edu/~adnan/pike.html" target="_blank" rel="noopener noreferrer">罗伯·派克<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>关系字段用于表示模型关系。它们可以应用到<code>ForeignKey</code>，<code>ManyToManyField</code>和<code>OneToOneField</code>关系，以及对反向关系，自定义关系等<code>GenericForeignKey</code>。</p> <hr> <p>**注意：**关系字段是在中声明的<code>relations.py</code>，但按照惯例，您应<code>serializers</code>使用<code>from rest_framework import serializers</code>并将其称为，从模块中导入它们<code>serializers.</code>。</p> <hr> <h4 id="检查关系。"><a href="#检查关系。" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#inspecting-relationships" target="_blank" rel="noopener noreferrer">检查关系。<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p>使用<code>ModelSerializer</code>该类时，将为您自动生成序列化程序字段和关系。检查这些自动生成的字段可能是确定如何自定义关系样式的有用工具。</p> <p>为此，请使用打开Django Shell，<code>python manage.py shell</code>然后导入序列化程序类，实例化它，然后打印对象表示形式…</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> myapp<span class="token punctuation">.</span>serializers <span class="token keyword">import</span> AccountSerializer
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> serializer <span class="token operator">=</span> AccountSerializer<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">repr</span><span class="token punctuation">(</span>serializer<span class="token punctuation">)</span><span class="token punctuation">)</span>
AccountSerializer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">id</span> <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'ID'</span><span class="token punctuation">,</span> read_only<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    name <span class="token operator">=</span> CharField<span class="token punctuation">(</span>allow_blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> required<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    owner <span class="token operator">=</span> PrimaryKeyRelatedField<span class="token punctuation">(</span>queryset<span class="token operator">=</span>User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h1 id="api参考"><a href="#api参考" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#api-reference" target="_blank" rel="noopener noreferrer">API参考<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h1> <p>为了解释各种类型的关系字段，我们将为示例使用几个简单的模型。我们的模型将用于音乐专辑，以及每个专辑中列出的曲目。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Album</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    album_name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    artist <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">Track</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    album <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>Album<span class="token punctuation">,</span> related_name<span class="token operator">=</span><span class="token string">'tracks'</span><span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span>
    order <span class="token operator">=</span> models<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span><span class="token punctuation">)</span>
    title <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    duration <span class="token operator">=</span> models<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        unique_together <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'album'</span><span class="token punctuation">,</span> <span class="token string">'order'</span><span class="token punctuation">]</span>
        ordering <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'order'</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'%d: %s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>order<span class="token punctuation">,</span> self<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
</code></pre></div><h2 id="stringrelatedfield"><a href="#stringrelatedfield" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#stringrelatedfield" target="_blank" rel="noopener noreferrer">StringRelatedField<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p><code>StringRelatedField</code>可使用其<code>__str__</code>方法来表示关系的目标。</p> <p>例如，下面的序列化器。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">AlbumSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    tracks <span class="token operator">=</span> serializers<span class="token punctuation">.</span>StringRelatedField<span class="token punctuation">(</span>many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Album
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'album_name'</span><span class="token punctuation">,</span> <span class="token string">'artist'</span><span class="token punctuation">,</span> <span class="token string">'tracks'</span><span class="token punctuation">]</span>
</code></pre></div><p>将序列化为以下表示形式。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token punctuation">{</span>
    <span class="token string">'album_name'</span><span class="token punctuation">:</span> <span class="token string">'Things We Lost In The Fire'</span><span class="token punctuation">,</span>
    <span class="token string">'artist'</span><span class="token punctuation">:</span> <span class="token string">'Low'</span><span class="token punctuation">,</span>
    <span class="token string">'tracks'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">'1: Sunflower'</span><span class="token punctuation">,</span>
        <span class="token string">'2: Whitetail'</span><span class="token punctuation">,</span>
        <span class="token string">'3: Dinosaur Act'</span><span class="token punctuation">,</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>该字段是只读的。</p> <p><strong>参数</strong>：</p> <ul><li><code>many</code>-如果应用于多对多关系，则应将此参数设置为<code>True</code>。</li></ul> <h2 id="primarykeyrelatedfield"><a href="#primarykeyrelatedfield" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#primarykeyrelatedfield" target="_blank" rel="noopener noreferrer">PrimaryKeyRelatedField<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p><code>PrimaryKeyRelatedField</code> 可以用于通过关系的主键表示关系的目标。</p> <p>例如，以下序列化器：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">AlbumSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    tracks <span class="token operator">=</span> serializers<span class="token punctuation">.</span>PrimaryKeyRelatedField<span class="token punctuation">(</span>many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> read_only<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Album
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'album_name'</span><span class="token punctuation">,</span> <span class="token string">'artist'</span><span class="token punctuation">,</span> <span class="token string">'tracks'</span><span class="token punctuation">]</span>
</code></pre></div><p>将序列化为这样的表示形式：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token punctuation">{</span>
    <span class="token string">'album_name'</span><span class="token punctuation">:</span> <span class="token string">'Undun'</span><span class="token punctuation">,</span>
    <span class="token string">'artist'</span><span class="token punctuation">:</span> <span class="token string">'The Roots'</span><span class="token punctuation">,</span>
    <span class="token string">'tracks'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token number">89</span><span class="token punctuation">,</span>
        <span class="token number">90</span><span class="token punctuation">,</span>
        <span class="token number">91</span><span class="token punctuation">,</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>默认情况下，此字段是可读写的，尽管您可以使用该<code>read_only</code>标志更改此行为。</p> <p><strong>参数</strong>：</p> <ul><li><code>queryset</code>-验证字段输入时用于模型实例查找的查询集。关系必须显式设置queryset或set <code>read_only=True</code>。</li> <li><code>many</code>-如果应用于多对多关系，则应将此参数设置为<code>True</code>。</li> <li><code>allow_null</code>-如果设置为<code>True</code>，则该字段将接受<code>None</code>可空关系的值或空字符串。默认为<code>False</code>。</li> <li><code>pk_field</code>-设置为一个字段以控制主键值的序列化/反序列化。例如，<code>pk_field=UUIDField(format='hex')</code>将UUID主键序列化为其紧凑的十六进制表示形式。</li></ul> <h2 id="超链接相关字段"><a href="#超链接相关字段" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#hyperlinkedrelatedfield" target="_blank" rel="noopener noreferrer">超链接相关字段<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p><code>HyperlinkedRelatedField</code> 可以用于通过超链接表示关系的目标。</p> <p>例如，以下序列化器：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">AlbumSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    tracks <span class="token operator">=</span> serializers<span class="token punctuation">.</span>HyperlinkedRelatedField<span class="token punctuation">(</span>
        many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
        read_only<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
        view_name<span class="token operator">=</span><span class="token string">'track-detail'</span>
    <span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Album
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'album_name'</span><span class="token punctuation">,</span> <span class="token string">'artist'</span><span class="token punctuation">,</span> <span class="token string">'tracks'</span><span class="token punctuation">]</span>
</code></pre></div><p>将序列化为这样的表示形式：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token punctuation">{</span>
    <span class="token string">'album_name'</span><span class="token punctuation">:</span> <span class="token string">'Graceland'</span><span class="token punctuation">,</span>
    <span class="token string">'artist'</span><span class="token punctuation">:</span> <span class="token string">'Paul Simon'</span><span class="token punctuation">,</span>
    <span class="token string">'tracks'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">'http://www.example.com/api/tracks/45/'</span><span class="token punctuation">,</span>
        <span class="token string">'http://www.example.com/api/tracks/46/'</span><span class="token punctuation">,</span>
        <span class="token string">'http://www.example.com/api/tracks/47/'</span><span class="token punctuation">,</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>默认情况下，此字段是可读写的，尽管您可以使用该<code>read_only</code>标志更改此行为。</p> <hr> <p><strong>注意</strong>：此字段是为那些映射到URL的对象设计的，该URL接受使用<code>lookup_field</code>和<code>lookup_url_kwarg</code>参数设置的单个URL关键字参数。</p> <p>这适用于包含单个主键或slug参数作为URL一部分的URL。</p> <p>如果您需要更复杂的超链接表示形式，则需要自定义字段，如下面的“ <a href="https://www.django-rest-framework.org/api-guide/relations/#custom-hyperlinked-fields" target="_blank" rel="noopener noreferrer">自定义超链接字段”<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>部分所述。</p> <hr> <p><strong>参数</strong>：</p> <ul><li><code>view_name</code>-应该用作关系目标的视图名称。如果您使用的<a href="https://www.django-rest-framework.org/api-guide/routers#defaultrouter" target="_blank" rel="noopener noreferrer">是标准路由器类，<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>则它将是一个格式为的字符串<code>-detail</code>。<strong>必需的</strong>。</li> <li><code>queryset</code>-验证字段输入时用于模型实例查找的查询集。关系必须显式设置queryset或set <code>read_only=True</code>。</li> <li><code>many</code>-如果应用于多对多关系，则应将此参数设置为<code>True</code>。</li> <li><code>allow_null</code>-如果设置为<code>True</code>，则该字段将接受<code>None</code>可空关系的值或空字符串。默认为<code>False</code>。</li> <li><code>lookup_field</code>-目标上应用于查找的字段。应该对应于引用视图上的URL关键字参数。默认值为<code>'pk'</code>。</li> <li><code>lookup_url_kwarg</code>-在URL conf中定义的与查找字段相对应的关键字参数的名称。默认使用与相同的值<code>lookup_field</code>。</li> <li><code>format</code>-如果使用格式后缀，则超链接字段将为目标使用相同的格式后缀，除非使用<code>format</code>参数将其覆盖。</li></ul> <h2 id="slugrelatedfield"><a href="#slugrelatedfield" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#slugrelatedfield" target="_blank" rel="noopener noreferrer">SlugRelatedField<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p><code>SlugRelatedField</code> 可以使用目标上的字段来表示关系的目标。</p> <p>例如，以下序列化器：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">AlbumSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    tracks <span class="token operator">=</span> serializers<span class="token punctuation">.</span>SlugRelatedField<span class="token punctuation">(</span>
        many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
        read_only<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
        slug_field<span class="token operator">=</span><span class="token string">'title'</span>
     <span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Album
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'album_name'</span><span class="token punctuation">,</span> <span class="token string">'artist'</span><span class="token punctuation">,</span> <span class="token string">'tracks'</span><span class="token punctuation">]</span>
</code></pre></div><p>将序列化为这样的表示形式：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token punctuation">{</span>
    <span class="token string">'album_name'</span><span class="token punctuation">:</span> <span class="token string">'Dear John'</span><span class="token punctuation">,</span>
    <span class="token string">'artist'</span><span class="token punctuation">:</span> <span class="token string">'Loney Dear'</span><span class="token punctuation">,</span>
    <span class="token string">'tracks'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">'Airport Surroundings'</span><span class="token punctuation">,</span>
        <span class="token string">'Everything Turns to You'</span><span class="token punctuation">,</span>
        <span class="token string">'I Was Only Going Out'</span><span class="token punctuation">,</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>默认情况下，此字段是可读写的，尽管您可以使用该<code>read_only</code>标志更改此行为。</p> <p>当使用<code>SlugRelatedField</code>作为一个读写字段，你通常会希望确保塞字段对应于具有示范场<code>unique=True</code>。</p> <p><strong>参数</strong>：</p> <ul><li><code>slug_field</code>-目标上用于表示它的字段。这应该是一个唯一标识任何给定实例的字段。例如，<code>username</code>。 <strong>需要</strong></li> <li><code>queryset</code>-验证字段输入时用于模型实例查找的查询集。关系必须显式设置queryset或set <code>read_only=True</code>。</li> <li><code>many</code>-如果应用于多对多关系，则应将此参数设置为<code>True</code>。</li> <li><code>allow_null</code>-如果设置为<code>True</code>，则该字段将接受<code>None</code>可空关系的值或空字符串。默认为<code>False</code>。</li></ul> <h2 id="超链接身份字段"><a href="#超链接身份字段" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#hyperlinkedidentityfield" target="_blank" rel="noopener noreferrer">超链接身份字段<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>该字段可以用作身份关系，例如<code>'url'</code>HyperlinkedModelSerializer上的字段。它也可以用于对象的属性。例如，以下序列化器：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">AlbumSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>HyperlinkedModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    track_listing <span class="token operator">=</span> serializers<span class="token punctuation">.</span>HyperlinkedIdentityField<span class="token punctuation">(</span>view_name<span class="token operator">=</span><span class="token string">'track-list'</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Album
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'album_name'</span><span class="token punctuation">,</span> <span class="token string">'artist'</span><span class="token punctuation">,</span> <span class="token string">'track_listing'</span><span class="token punctuation">]</span>
</code></pre></div><p>将序列化为这样的表示形式：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token punctuation">{</span>
    <span class="token string">'album_name'</span><span class="token punctuation">:</span> <span class="token string">'The Eraser'</span><span class="token punctuation">,</span>
    <span class="token string">'artist'</span><span class="token punctuation">:</span> <span class="token string">'Thom Yorke'</span><span class="token punctuation">,</span>
    <span class="token string">'track_listing'</span><span class="token punctuation">:</span> <span class="token string">'http://www.example.com/api/track_list/12/'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>该字段始终是只读的。</p> <p><strong>参数</strong>：</p> <ul><li><code>view_name</code>-应该用作关系目标的视图名称。如果您使用的<a href="https://www.django-rest-framework.org/api-guide/routers#defaultrouter" target="_blank" rel="noopener noreferrer">是标准路由器类，<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>则它将是一个格式为的字符串<code>-detail</code>。 <strong>必需的</strong>。</li> <li><code>lookup_field</code>-目标上应用于查找的字段。应该对应于引用视图上的URL关键字参数。默认值为<code>'pk'</code>。</li> <li><code>lookup_url_kwarg</code>-在URL conf中定义的与查找字段相对应的关键字参数的名称。默认使用与相同的值<code>lookup_field</code>。</li> <li><code>format</code>-如果使用格式后缀，则超链接字段将为目标使用相同的格式后缀，除非使用<code>format</code>参数将其覆盖。</li></ul> <hr> <h1 id="嵌套关系"><a href="#嵌套关系" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#nested-relationships" target="_blank" rel="noopener noreferrer">嵌套关系<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h1> <p>与先前讨论的对另一个实体的引用相反，所引用的实体也可以嵌入或<em>嵌套</em> 在<em>引用</em>该实体的对象的表示中。这样的嵌套关系可以通过使用序列化器作为字段来表达。</p> <p>如果该字段用于表示一对多关系，则应将<code>many=True</code>标志添加到序列化器字段。</p> <h2 id="例"><a href="#例" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#example" target="_blank" rel="noopener noreferrer">例<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>例如，以下序列化器：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">TrackSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Track
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'order'</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'duration'</span><span class="token punctuation">]</span>

<span class="token keyword">class</span> <span class="token class-name">AlbumSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    tracks <span class="token operator">=</span> TrackSerializer<span class="token punctuation">(</span>many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> read_only<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Album
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'album_name'</span><span class="token punctuation">,</span> <span class="token string">'artist'</span><span class="token punctuation">,</span> <span class="token string">'tracks'</span><span class="token punctuation">]</span>
</code></pre></div><p>将序列化为这样的嵌套表示形式：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> album <span class="token operator">=</span> Album<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>album_name<span class="token operator">=</span><span class="token string">&quot;The Grey Album&quot;</span><span class="token punctuation">,</span> artist<span class="token operator">=</span><span class="token string">'Danger Mouse'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Track<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>album<span class="token operator">=</span>album<span class="token punctuation">,</span> order<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> title<span class="token operator">=</span><span class="token string">'Public Service Announcement'</span><span class="token punctuation">,</span> duration<span class="token operator">=</span><span class="token number">245</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>Track<span class="token punctuation">:</span> Track <span class="token builtin">object</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Track<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>album<span class="token operator">=</span>album<span class="token punctuation">,</span> order<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> title<span class="token operator">=</span><span class="token string">'What More Can I Say'</span><span class="token punctuation">,</span> duration<span class="token operator">=</span><span class="token number">264</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>Track<span class="token punctuation">:</span> Track <span class="token builtin">object</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Track<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>album<span class="token operator">=</span>album<span class="token punctuation">,</span> order<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> title<span class="token operator">=</span><span class="token string">'Encore'</span><span class="token punctuation">,</span> duration<span class="token operator">=</span><span class="token number">159</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>Track<span class="token punctuation">:</span> Track <span class="token builtin">object</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> serializer <span class="token operator">=</span> AlbumSerializer<span class="token punctuation">(</span>instance<span class="token operator">=</span>album<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> serializer<span class="token punctuation">.</span>data
<span class="token punctuation">{</span>
    <span class="token string">'album_name'</span><span class="token punctuation">:</span> <span class="token string">'The Grey Album'</span><span class="token punctuation">,</span>
    <span class="token string">'artist'</span><span class="token punctuation">:</span> <span class="token string">'Danger Mouse'</span><span class="token punctuation">,</span>
    <span class="token string">'tracks'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span><span class="token string">'order'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">:</span> <span class="token string">'Public Service Announcement'</span><span class="token punctuation">,</span> <span class="token string">'duration'</span><span class="token punctuation">:</span> <span class="token number">245</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'order'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">:</span> <span class="token string">'What More Can I Say'</span><span class="token punctuation">,</span> <span class="token string">'duration'</span><span class="token punctuation">:</span> <span class="token number">264</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'order'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">:</span> <span class="token string">'Encore'</span><span class="token punctuation">,</span> <span class="token string">'duration'</span><span class="token punctuation">:</span> <span class="token number">159</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="可写的嵌套序列化器"><a href="#可写的嵌套序列化器" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#writable-nested-serializers" target="_blank" rel="noopener noreferrer">可写的嵌套序列化器<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>默认情况下，嵌套串行器是只读的。如果要支持对嵌套序列化器字段的写操作，则需要创建<code>create()</code>和/或<code>update()</code>方法，以明确指定应如何保存子关系。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">TrackSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Track
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'order'</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'duration'</span><span class="token punctuation">]</span>

<span class="token keyword">class</span> <span class="token class-name">AlbumSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    tracks <span class="token operator">=</span> TrackSerializer<span class="token punctuation">(</span>many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Album
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'album_name'</span><span class="token punctuation">,</span> <span class="token string">'artist'</span><span class="token punctuation">,</span> <span class="token string">'tracks'</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">create</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> validated_data<span class="token punctuation">)</span><span class="token punctuation">:</span>
        tracks_data <span class="token operator">=</span> validated_data<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token string">'tracks'</span><span class="token punctuation">)</span>
        album <span class="token operator">=</span> Album<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span><span class="token operator">**</span>validated_data<span class="token punctuation">)</span>
        <span class="token keyword">for</span> track_data <span class="token keyword">in</span> tracks_data<span class="token punctuation">:</span>
            Track<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>album<span class="token operator">=</span>album<span class="token punctuation">,</span> <span class="token operator">**</span>track_data<span class="token punctuation">)</span>
        <span class="token keyword">return</span> album

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'album_name'</span><span class="token punctuation">:</span> <span class="token string">'The Grey Album'</span><span class="token punctuation">,</span>
    <span class="token string">'artist'</span><span class="token punctuation">:</span> <span class="token string">'Danger Mouse'</span><span class="token punctuation">,</span>
    <span class="token string">'tracks'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span><span class="token string">'order'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">:</span> <span class="token string">'Public Service Announcement'</span><span class="token punctuation">,</span> <span class="token string">'duration'</span><span class="token punctuation">:</span> <span class="token number">245</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'order'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">:</span> <span class="token string">'What More Can I Say'</span><span class="token punctuation">,</span> <span class="token string">'duration'</span><span class="token punctuation">:</span> <span class="token number">264</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'order'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">:</span> <span class="token string">'Encore'</span><span class="token punctuation">,</span> <span class="token string">'duration'</span><span class="token punctuation">:</span> <span class="token number">159</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> serializer <span class="token operator">=</span> AlbumSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>data<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token boolean">True</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> serializer<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>Album<span class="token punctuation">:</span> Album <span class="token builtin">object</span><span class="token operator">&gt;</span>
</code></pre></div><hr> <h1 id="自定义关系字段"><a href="#自定义关系字段" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#custom-relational-fields" target="_blank" rel="noopener noreferrer">自定义关系字段<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h1> <p>在极少数情况下，现有关系样式都不适合您所需的表示形式，您可以实现一个完全自定义的关系字段，该字段精确描述了应如何从模型实例生成输出表示形式。</p> <p>要实现自定义关系字段，您应该重写<code>RelatedField</code>，并实现<code>.to_representation(self, value)</code>方法。此方法将字段的目标作为<code>value</code>参数，并应返回用于序列化目标的表示形式。该<code>value</code>参数通常是一个模型实例。</p> <p>如果要实现读写关系字段，则还必须实现该<code>.to_internal_value(self, data)</code>方法。</p> <p>要提供基于的动态查询集<code>context</code>，您还可以覆盖<code>.get_queryset(self)</code>而不是<code>.queryset</code>在类上或在初始化字段时指定。</p> <h2 id="例-2"><a href="#例-2" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#example_1" target="_blank" rel="noopener noreferrer">例<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>例如，我们可以定义一个关系字段，以使用其顺序，标题和持续时间将轨道序列化为自定义字符串表示形式。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> time

<span class="token keyword">class</span> <span class="token class-name">TrackListingField</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>RelatedField<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">to_representation</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        duration <span class="token operator">=</span> time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">'%M:%S'</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>gmtime<span class="token punctuation">(</span>value<span class="token punctuation">.</span>duration<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token string">'Track %d: %s (%s)'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span>order<span class="token punctuation">,</span> value<span class="token punctuation">.</span>name<span class="token punctuation">,</span> duration<span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">AlbumSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    tracks <span class="token operator">=</span> TrackListingField<span class="token punctuation">(</span>many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Album
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'album_name'</span><span class="token punctuation">,</span> <span class="token string">'artist'</span><span class="token punctuation">,</span> <span class="token string">'tracks'</span><span class="token punctuation">]</span>
</code></pre></div><p>然后，此自定义字段将序列化为以下表示形式。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token punctuation">{</span>
    <span class="token string">'album_name'</span><span class="token punctuation">:</span> <span class="token string">'Sometimes I Wish We Were an Eagle'</span><span class="token punctuation">,</span>
    <span class="token string">'artist'</span><span class="token punctuation">:</span> <span class="token string">'Bill Callahan'</span><span class="token punctuation">,</span>
    <span class="token string">'tracks'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">'Track 1: Jim Cain (04:39)'</span><span class="token punctuation">,</span>
        <span class="token string">'Track 2: Eid Ma Clack Shaw (04:19)'</span><span class="token punctuation">,</span>
        <span class="token string">'Track 3: The Wind and the Dove (04:34)'</span><span class="token punctuation">,</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h1 id="自定义超链接字段"><a href="#自定义超链接字段" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#custom-hyperlinked-fields" target="_blank" rel="noopener noreferrer">自定义超链接字段<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h1> <p>在某些情况下，您可能需要自定义超链接字段的行为，以表示需要多个查询字段的URL。</p> <p>您可以通过覆盖实现此目的<code>HyperlinkedRelatedField</code>。可以重写两种方法：</p> <p><strong>get_url（self，obj，view_name，request，format）</strong></p> <p>该<code>get_url</code>方法用于将对象实例映射到其URL表示形式。</p> <p><code>NoReverseMatch</code>如果<code>view_name</code>和<code>lookup_field</code> 属性未配置为正确匹配URL conf，则可能会引发。</p> <p><strong>get_object（self，view_name，view_args，view_kwargs）</strong></p> <p>如果要支持可写的超链接字段，则还需要覆盖<code>get_object</code>，以便将传入的URL映射回它们表示的对象。对于只读超链接字段，无需重写此方法。</p> <p>此方法的返回值应为与匹配的URL conf参数相对应的对象。</p> <p>可能会引发<code>ObjectDoesNotExist</code>异常。</p> <h2 id="例-3"><a href="#例-3" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#example_2" target="_blank" rel="noopener noreferrer">例<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>假设我们有一个带两个关键字参数的customer对象的URL，如下所示：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">/</span>api<span class="token operator">/</span><span class="token operator">&lt;</span>organization_slug<span class="token operator">&gt;</span><span class="token operator">/</span>customers<span class="token operator">/</span><span class="token operator">&lt;</span>customer_pk<span class="token operator">&gt;</span><span class="token operator">/</span>
</code></pre></div><p>这不能用默认实现表示，默认实现只接受一个查询字段。</p> <p>在这种情况下，我们需要重写<code>HyperlinkedRelatedField</code>以获得所需的行为：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> serializers
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>reverse <span class="token keyword">import</span> reverse

<span class="token keyword">class</span> <span class="token class-name">CustomerHyperlink</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>HyperlinkedRelatedField<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># We define these as class attributes, so we don't need to pass them as arguments.</span>
    view_name <span class="token operator">=</span> <span class="token string">'customer-detail'</span>
    queryset <span class="token operator">=</span> Customer<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">get_url</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">,</span> view_name<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token builtin">format</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        url_kwargs <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">'organization_slug'</span><span class="token punctuation">:</span> obj<span class="token punctuation">.</span>organization<span class="token punctuation">.</span>slug<span class="token punctuation">,</span>
            <span class="token string">'customer_pk'</span><span class="token punctuation">:</span> obj<span class="token punctuation">.</span>pk
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> reverse<span class="token punctuation">(</span>view_name<span class="token punctuation">,</span> kwargs<span class="token operator">=</span>url_kwargs<span class="token punctuation">,</span> request<span class="token operator">=</span>request<span class="token punctuation">,</span> <span class="token builtin">format</span><span class="token operator">=</span><span class="token builtin">format</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">get_object</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> view_name<span class="token punctuation">,</span> view_args<span class="token punctuation">,</span> view_kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        lookup_kwargs <span class="token operator">=</span> <span class="token punctuation">{</span>
           <span class="token string">'organization__slug'</span><span class="token punctuation">:</span> view_kwargs<span class="token punctuation">[</span><span class="token string">'organization_slug'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
           <span class="token string">'pk'</span><span class="token punctuation">:</span> view_kwargs<span class="token punctuation">[</span><span class="token string">'customer_pk'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>get_queryset<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token operator">**</span>lookup_kwargs<span class="token punctuation">)</span>
</code></pre></div><p>请注意，如果您想将此样式与通用视图一起使用，则还需要<code>.get_object</code>在视图上进行覆盖，以获取正确的查找行为。</p> <p>通常，对于可能的API表示形式，我们建议使用扁平样式，但是在进行审核时，嵌套的URL样式也可能是合理的。</p> <hr> <h1 id="进一步说明"><a href="#进一步说明" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#further-notes" target="_blank" rel="noopener noreferrer">进一步说明<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h1> <h2 id="该queryset参数"><a href="#该queryset参数" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#the-queryset-argument" target="_blank" rel="noopener noreferrer">该<code>queryset</code>参数<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>该<code>queryset</code>参数仅是<em>可写</em>关系字段所必需的，在这种情况下，该参数用于执行从原始用户输入映射到模型实例的模型实例查找。</p> <p>在版本2.xa串类可以<em>有时</em>自动确定<code>queryset</code>参数*，如果*一个<code>ModelSerializer</code>正在使用的类了。</p> <p>现在，此行为已替换为<em>始终</em><code>queryset</code>对可写关系字段使用显式参数。</p> <p>这样做可以减少<code>ModelSerializer</code>提供的隐藏“魔术”的数量，使字段的行为更清晰，并确保在使用<code>ModelSerializer</code>快捷方式或使用完全显式的<code>Serializer</code>类之间进行切换很简单。</p> <h2 id="自定义html显示"><a href="#自定义html显示" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#customizing-the-html-display" target="_blank" rel="noopener noreferrer">自定义HTML显示<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>模型的内置<code>__str__</code>方法将用于生成用于填充<code>choices</code>属性的对象的字符串表示形式。这些选项用于填充可浏览API中的选定HTML输入。</p> <p>要为这种投入提供定制化表示，覆盖<code>display_value()</code>一个的<code>RelatedField</code>子类。此方法将接收模型对象，并应返回适合于表示它的字符串。例如：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">TrackPrimaryKeyRelatedField</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>PrimaryKeyRelatedField<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">display_value</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> instance<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'Track: %s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>instance<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
</code></pre></div><h2 id="选择场截止"><a href="#选择场截止" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#select-field-cutoffs" target="_blank" rel="noopener noreferrer">选择场截止<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>当在可浏览的API中呈现时，关系字段将默认为仅显示最多1000个可选项目。如果存在更多项目，则将显示带有“超过1000个项目…”的禁用选项。</p> <p>此行为旨在防止由于显示大量关系而导致模板无法在可接受的时间范围内呈现。</p> <p>您可以使用两个关键字参数来控制此行为：</p> <ul><li><code>html_cutoff</code>-如果设置，则将是HTML select下拉列表将显示的最大选择数。设置为<code>None</code>禁用任何限制。默认为<code>1000</code>。</li> <li><code>html_cutoff_text</code>-如果设置了此选项，则如果在HTML选择下拉列表中已截断最大数量的项目，则它将显示文本指示器。默认为<code>&quot;More than {count} items…&quot;</code></li></ul> <p>您还可以使用设置<code>HTML_SELECT_CUTOFF</code>和全局控制这些设置<code>HTML_SELECT_CUTOFF_TEXT</code>。</p> <p>在强制执行截止的情况下，您可能需要改用HTML表单中的纯输入字段。您可以使用<code>style</code>关键字参数来实现。例如：</p> <div class="language-python extra-class"><pre class="language-python"><code>assigned_to <span class="token operator">=</span> serializers<span class="token punctuation">.</span>SlugRelatedField<span class="token punctuation">(</span>
   queryset<span class="token operator">=</span>User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   slug_field<span class="token operator">=</span><span class="token string">'username'</span><span class="token punctuation">,</span>
   style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'base_template'</span><span class="token punctuation">:</span> <span class="token string">'input.html'</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><h2 id="反向关系"><a href="#反向关系" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#reverse-relations" target="_blank" rel="noopener noreferrer">反向关系<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>请注意，<code>ModelSerializer</code>和<code>HyperlinkedModelSerializer</code>类不会自动包含反向关系。要包括反向关系，必须将其显式添加到字段列表中。例如：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">AlbumSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'tracks'</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
</code></pre></div><p>通常，您需要确保<code>related_name</code>在关系上设置了适当的参数，可以用作字段名称。例如：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Track</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    album <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>Album<span class="token punctuation">,</span> related_name<span class="token operator">=</span><span class="token string">'tracks'</span><span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><p>如果尚未为反向关系设置相关名称，则需要在<code>fields</code>参数中使用自动生成的相关名称。例如：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">AlbumSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'track_set'</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
</code></pre></div><p>有关更多详细信息，请参见关于<a href="https://docs.djangoproject.com/en/stable/topics/db/queries/#following-relationships-backward" target="_blank" rel="noopener noreferrer">反向关系<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的Django文档。</p> <h2 id="通用关系"><a href="#通用关系" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#generic-relationships" target="_blank" rel="noopener noreferrer">通用关系<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>如果要序列化通用外键，则需要定义一个自定义字段，以明确确定要序列化关系目标的方式。</p> <p>例如，给定标记的以下模型，该模型与其他任意模型具有通用关系：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">TaggedItem</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    Tags arbitrary model instances using a generic relation.

    See: https://docs.djangoproject.com/en/stable/ref/contrib/contenttypes/
    &quot;&quot;&quot;</span>
    tag_name <span class="token operator">=</span> models<span class="token punctuation">.</span>SlugField<span class="token punctuation">(</span><span class="token punctuation">)</span>
    content_type <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>ContentType<span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span>
    object_id <span class="token operator">=</span> models<span class="token punctuation">.</span>PositiveIntegerField<span class="token punctuation">(</span><span class="token punctuation">)</span>
    tagged_object <span class="token operator">=</span> GenericForeignKey<span class="token punctuation">(</span><span class="token string">'content_type'</span><span class="token punctuation">,</span> <span class="token string">'object_id'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>tag_name
</code></pre></div><p>还有以下两个模型，它们可能具有关联的标签：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Bookmark</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    A bookmark consists of a URL, and 0 or more descriptive tags.
    &quot;&quot;&quot;</span>
    url <span class="token operator">=</span> models<span class="token punctuation">.</span>URLField<span class="token punctuation">(</span><span class="token punctuation">)</span>
    tags <span class="token operator">=</span> GenericRelation<span class="token punctuation">(</span>TaggedItem<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">Note</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    A note consists of some text, and 0 or more descriptive tags.
    &quot;&quot;&quot;</span>
    text <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">)</span>
    tags <span class="token operator">=</span> GenericRelation<span class="token punctuation">(</span>TaggedItem<span class="token punctuation">)</span>
</code></pre></div><p>我们可以定义一个自定义字段，该字段可用于序列化带标签的实例，使用每个实例的类型来确定应如何序列化它。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">TaggedObjectRelatedField</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>RelatedField<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    A custom field to use for the `tagged_object` generic relationship.
    &quot;&quot;&quot;</span>

    <span class="token keyword">def</span> <span class="token function">to_representation</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        Serialize tagged objects to a simple textual representation.
        &quot;&quot;&quot;</span>
        <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> Bookmark<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token string">'Bookmark: '</span> <span class="token operator">+</span> value<span class="token punctuation">.</span>url
        <span class="token keyword">elif</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> Note<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token string">'Note: '</span> <span class="token operator">+</span> value<span class="token punctuation">.</span>text
        <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string">'Unexpected type of tagged object'</span><span class="token punctuation">)</span>
</code></pre></div><p>如果需要关系的目标具有嵌套表示，则可以在<code>.to_representation()</code>方法内部使用所需的序列化器：</p> <div class="language-python extra-class"><pre class="language-python"><code>    <span class="token keyword">def</span> <span class="token function">to_representation</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        Serialize bookmark instances using a bookmark serializer,
        and note instances using a note serializer.
        &quot;&quot;&quot;</span>
        <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> Bookmark<span class="token punctuation">)</span><span class="token punctuation">:</span>
            serializer <span class="token operator">=</span> BookmarkSerializer<span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token keyword">elif</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> Note<span class="token punctuation">)</span><span class="token punctuation">:</span>
            serializer <span class="token operator">=</span> NoteSerializer<span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string">'Unexpected type of tagged object'</span><span class="token punctuation">)</span>

        <span class="token keyword">return</span> serializer<span class="token punctuation">.</span>data
</code></pre></div><p>注意，使用<code>GenericRelation</code>字段表示的反向通用密钥可以使用常规的关系字段类型进行序列化，因为关系中目标的类型始终是已知的。</p> <p>有关更多信息，请参见<a href="https://docs.djangoproject.com/en/stable/ref/contrib/contenttypes/#id1" target="_blank" rel="noopener noreferrer">有关通用关系的Django文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h2 id="通过模型的manytomanyfields"><a href="#通过模型的manytomanyfields" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#manytomanyfields-with-a-through-model" target="_blank" rel="noopener noreferrer">通过模型的ManyToManyFields<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>默认情况下，<code>ManyToManyField</code>以 <code>through</code>指定模型为目标的关系字段设置为只读。</p> <p>如果您<code>ManyToManyField</code>使用直通模型明确指定指向的关系字段 ，请确保将其设置<code>read_only</code> 为<code>True</code>。</p> <p>如果希望<a href="https://docs.djangoproject.com/en/2.2/topics/db/models/#intermediary-manytomany" target="_blank" rel="noopener noreferrer">在直通模型上<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>表示<a href="https://docs.djangoproject.com/en/2.2/topics/db/models/#intermediary-manytomany" target="_blank" rel="noopener noreferrer">额外的字段，<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>则可以将直通模型序列化为<a href="https://www.django-rest-framework.org/api-guide/serializers/#dealing-with-nested-objects" target="_blank" rel="noopener noreferrer">嵌套对象<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <hr> <h1 id="第三方套餐"><a href="#第三方套餐" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#third-party-packages" target="_blank" rel="noopener noreferrer">第三方套餐<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h1> <p>以下第三方软件包也可用。</p> <h2 id="drf嵌套路由器"><a href="#drf嵌套路由器" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#drf-nested-routers" target="_blank" rel="noopener noreferrer">DRF嵌套路由器<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>的<a href="https://github.com/alanjds/drf-nested-routers" target="_blank" rel="noopener noreferrer">DRF-嵌套的路由器包<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>提供路由器和关系字段用于与嵌套资源工作。</p> <h2 id="其余框架的一般关系"><a href="#其余框架的一般关系" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/relations/#rest-framework-generic-relations" target="_blank" rel="noopener noreferrer">其余框架的一般关系<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>在<a href="https://github.com/Ian-Foote/rest-framework-generic-relations" target="_blank" rel="noopener noreferrer">其余的框架，仿制关系<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>库提供了通用的外键的读/写序列化。</p></div> <!----> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/python/restFramework/10序列化器字段.html" class="prev">
        序列化器字段
      </a></span> <span class="next"><a href="/python/restFramework/12验证器.html">
        验证者
      </a>
      →
    </span></p></div> <div class="page-footer"><ul class="inner"><li>Theme by <a href="https://github.com/qcyblm/vuepress-theme-vpx" title="本站主题" target="_blank" rel="noopener noreferrer">VPX</a></li> <li>Powered by <a href="https://www.vuepress.cn/" target="_blank" rel="noopener noreferrer">VuePress</a></li> <!----> <li>
      © 2018-2021
      <a href="https://xuqilong.top" target="_blank" rel="noopener noreferrer"> Copyright © 2021-present Qilong Xu © 2019 </a></li> <li><a href="https://beian.miit.gov.cn" target="_blank" rel="noopener noreferrer"><!---->  粤ICP备19034953号-1
      </a></li> </ul></div> </main> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.b8069efc.js" defer></script><script src="/assets/js/2.463f0d24.js" defer></script><script src="/assets/js/23.8f5b85c7.js" defer></script>
  </body>
</html>
