<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Routers | FeelingLive</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/assets/img/logo/logo.png">
    <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?966c32065299cfcd0ae5ae2eae1aa280";
              var s = document.getElementsByTagName("script")[0]; 
              s.parentNode.insertBefore(hm, s);
            })();            
          </script>
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.57bcb71c.css" as="style"><link rel="preload" href="/assets/js/app.b8069efc.js" as="script"><link rel="preload" href="/assets/js/2.463f0d24.js" as="script"><link rel="preload" href="/assets/js/46.72ff2f55.js" as="script"><link rel="prefetch" href="/assets/js/10.0762cba9.js"><link rel="prefetch" href="/assets/js/11.4708d5da.js"><link rel="prefetch" href="/assets/js/12.c6cafa54.js"><link rel="prefetch" href="/assets/js/13.d8200bdf.js"><link rel="prefetch" href="/assets/js/14.8064c10f.js"><link rel="prefetch" href="/assets/js/15.9243c1a6.js"><link rel="prefetch" href="/assets/js/16.f6f1013c.js"><link rel="prefetch" href="/assets/js/17.fc230ff5.js"><link rel="prefetch" href="/assets/js/18.f5401d4b.js"><link rel="prefetch" href="/assets/js/19.97ad76e6.js"><link rel="prefetch" href="/assets/js/20.c04d5e36.js"><link rel="prefetch" href="/assets/js/21.3a377e15.js"><link rel="prefetch" href="/assets/js/22.4f0e9918.js"><link rel="prefetch" href="/assets/js/23.8f5b85c7.js"><link rel="prefetch" href="/assets/js/24.e0dea9d9.js"><link rel="prefetch" href="/assets/js/25.6e5a4514.js"><link rel="prefetch" href="/assets/js/26.f1eb71b3.js"><link rel="prefetch" href="/assets/js/27.648fe148.js"><link rel="prefetch" href="/assets/js/28.0f4106c7.js"><link rel="prefetch" href="/assets/js/29.13fab01e.js"><link rel="prefetch" href="/assets/js/3.42c89626.js"><link rel="prefetch" href="/assets/js/30.776c58af.js"><link rel="prefetch" href="/assets/js/31.9d1301f0.js"><link rel="prefetch" href="/assets/js/32.720f8e3c.js"><link rel="prefetch" href="/assets/js/33.3e536bad.js"><link rel="prefetch" href="/assets/js/34.eb929122.js"><link rel="prefetch" href="/assets/js/35.d6c75691.js"><link rel="prefetch" href="/assets/js/36.d1359dcd.js"><link rel="prefetch" href="/assets/js/37.af9dcad6.js"><link rel="prefetch" href="/assets/js/38.4dcdfb0e.js"><link rel="prefetch" href="/assets/js/39.a11a56c7.js"><link rel="prefetch" href="/assets/js/4.32e9b2cd.js"><link rel="prefetch" href="/assets/js/40.99b7368a.js"><link rel="prefetch" href="/assets/js/41.6b4e41f7.js"><link rel="prefetch" href="/assets/js/42.01f4bb4d.js"><link rel="prefetch" href="/assets/js/43.395f4458.js"><link rel="prefetch" href="/assets/js/44.6ffa66fa.js"><link rel="prefetch" href="/assets/js/45.e29df2ce.js"><link rel="prefetch" href="/assets/js/47.8ffb0064.js"><link rel="prefetch" href="/assets/js/48.2ca0eabc.js"><link rel="prefetch" href="/assets/js/49.9b2c63ae.js"><link rel="prefetch" href="/assets/js/5.92edf24a.js"><link rel="prefetch" href="/assets/js/50.115e85f5.js"><link rel="prefetch" href="/assets/js/51.8f5cbf89.js"><link rel="prefetch" href="/assets/js/52.4a6fde6e.js"><link rel="prefetch" href="/assets/js/53.b63a6ed6.js"><link rel="prefetch" href="/assets/js/54.fbb07875.js"><link rel="prefetch" href="/assets/js/55.e995daf3.js"><link rel="prefetch" href="/assets/js/56.15951fbe.js"><link rel="prefetch" href="/assets/js/57.4c91e795.js"><link rel="prefetch" href="/assets/js/58.02114ca3.js"><link rel="prefetch" href="/assets/js/6.0b766ead.js"><link rel="prefetch" href="/assets/js/7.beb00bfa.js"><link rel="prefetch" href="/assets/js/8.e469995f.js"><link rel="prefetch" href="/assets/js/9.35927e25.js">
    <link rel="stylesheet" href="/assets/css/0.styles.57bcb71c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo/logo.png" alt="FeelingLive" class="logo"> <span class="site-name">FeelingLive</span></a> <nav class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <ul class="nav-links can-hide"><li class="nav-item"><a href="/" class="nav-link"><!----> <span>主页</span></a></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><!----> <span class="title">
      Python
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Python" class="mobile-dropdown-title"><!----> <span class="title">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/coroutine/" class="nav-link"><!----> <span>协程</span></a></li><li class="dropdown-item"><!----> <a href="/python/advance/" class="nav-link"><!----> <span>进阶</span></a></li><li class="dropdown-item"><!----> <a href="/python/standard/" class="nav-link"><!----> <span>标准库</span></a></li><li class="dropdown-item"><!----> <a href="/python/restFramework/" class="nav-link router-link-active"><!----> <span>REST Framework</span></a></li><li class="dropdown-item"><!----> <a href="/python/utils/" class="nav-link"><!----> <span>各种工具</span></a></li><li class="dropdown-item"><!----> <a href="/python/skill/" class="nav-link"><!----> <span>使用技巧和例子</span></a></li></ul></div></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title">
      Java
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><!----> <span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/basis/" class="nav-link"><!----> <span>基础</span></a></li></ul></div></li><li class="nav-item"><a href="/linux/" class="nav-link"><!----> <span>Linux</span></a></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title">
      中间件
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><!----> <span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/middle/elasticsearch/" class="nav-link"><!----> <span>Elasticsearch</span></a></li><li class="dropdown-item"><!----> <a href="/middle/nginx/" class="nav-link"><!----> <span>Nginx</span></a></li><li class="dropdown-item"><!----> <a href="/middle/kafka/" class="nav-link"><!----> <span>Kafka</span></a></li><li class="dropdown-item"><!----> <a href="/middle/f5/" class="nav-link"><!----> <span>F5</span></a></li></ul></div></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title">
      数据库
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><!----> <span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/database/mysql/" class="nav-link"><!----> <span>MySQL</span></a></li><li class="dropdown-item"><!----> <a href="/database/redis/" class="nav-link"><!----> <span>Redis</span></a></li></ul></div></li><li class="nav-item"><a href="https://github.com/xuqil" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----> <span>Git Hub</span> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <!----></ul> <div class="theme-switcher"><a class="switch dark"><span><i aria-hidden="true" class="fa fa-moon"></i></span></a></div></nav></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <ul class="nav-links"><li class="nav-item"><a href="/" class="nav-link"><!----> <span>主页</span></a></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><!----> <span class="title">
      Python
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Python" class="mobile-dropdown-title"><!----> <span class="title">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/coroutine/" class="nav-link"><!----> <span>协程</span></a></li><li class="dropdown-item"><!----> <a href="/python/advance/" class="nav-link"><!----> <span>进阶</span></a></li><li class="dropdown-item"><!----> <a href="/python/standard/" class="nav-link"><!----> <span>标准库</span></a></li><li class="dropdown-item"><!----> <a href="/python/restFramework/" class="nav-link router-link-active"><!----> <span>REST Framework</span></a></li><li class="dropdown-item"><!----> <a href="/python/utils/" class="nav-link"><!----> <span>各种工具</span></a></li><li class="dropdown-item"><!----> <a href="/python/skill/" class="nav-link"><!----> <span>使用技巧和例子</span></a></li></ul></div></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title">
      Java
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><!----> <span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/basis/" class="nav-link"><!----> <span>基础</span></a></li></ul></div></li><li class="nav-item"><a href="/linux/" class="nav-link"><!----> <span>Linux</span></a></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title">
      中间件
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><!----> <span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/middle/elasticsearch/" class="nav-link"><!----> <span>Elasticsearch</span></a></li><li class="dropdown-item"><!----> <a href="/middle/nginx/" class="nav-link"><!----> <span>Nginx</span></a></li><li class="dropdown-item"><!----> <a href="/middle/kafka/" class="nav-link"><!----> <span>Kafka</span></a></li><li class="dropdown-item"><!----> <a href="/middle/f5/" class="nav-link"><!----> <span>F5</span></a></li></ul></div></li><li class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title">
      数据库
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><!----> <span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/database/mysql/" class="nav-link"><!----> <span>MySQL</span></a></li><li class="dropdown-item"><!----> <a href="/database/redis/" class="nav-link"><!----> <span>Redis</span></a></li></ul></div></li><li class="nav-item"><a href="https://github.com/xuqil" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----> <span>Git Hub</span> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <!----></ul>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><i></i> <span>RESTFramework</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/python/restFramework/" aria-current="page" class="sidebar-link">要求</a></li><li><a href="/python/restFramework/10序列化器字段.html" class="sidebar-link">序列化器字段</a></li><li><a href="/python/restFramework/11序列化器关系.html" class="sidebar-link">序列化器关系</a></li><li><a href="/python/restFramework/12验证器.html" class="sidebar-link">验证者</a></li><li><a href="/python/restFramework/13身份验证.html" class="sidebar-link">认证方式</a></li><li><a href="/python/restFramework/14权限.html" class="sidebar-link">权限</a></li><li><a href="/python/restFramework/15缓存.html" class="sidebar-link">快取</a></li><li><a href="/python/restFramework/16节流.html" class="sidebar-link">节流</a></li><li><a href="/python/restFramework/17筛选.html" class="sidebar-link">筛选</a></li><li><a href="/python/restFramework/18分页.html" class="sidebar-link">分页</a></li><li><a href="/python/restFramework/19版本控制.html" class="sidebar-link">版本控制</a></li><li><a href="/python/restFramework/1请求.html" class="sidebar-link">Requests</a></li><li><a href="/python/restFramework/20内容协商.html" class="sidebar-link">内容协商</a></li><li><a href="/python/restFramework/21元数据.html" class="sidebar-link">元数据</a></li><li><a href="/python/restFramework/22架构.html" class="sidebar-link">架构图</a></li><li><a href="/python/restFramework/23格式后缀.html" class="sidebar-link">格式后缀</a></li><li><a href="/python/restFramework/24返回URL.html" class="sidebar-link">返回网址</a></li><li><a href="/python/restFramework/25异常.html" class="sidebar-link">例外情况</a></li><li><a href="/python/restFramework/26状态码.html" class="sidebar-link">状态码</a></li><li><a href="/python/restFramework/27测试.html" class="sidebar-link">测试中</a></li><li><a href="/python/restFramework/28设置.html" class="sidebar-link">设定值</a></li><li><a href="/python/restFramework/2响应.html" class="sidebar-link">Responses</a></li><li><a href="/python/restFramework/3视图..html" class="sidebar-link">基于类的视图</a></li><li><a href="/python/restFramework/4通用视图.html" class="sidebar-link">通用视图</a></li><li><a href="/python/restFramework/5视图集.html" class="sidebar-link">ViewSets</a></li><li><a href="/python/restFramework/6路由.html" class="active sidebar-link">Routers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/restFramework/6路由.html#用法" class="sidebar-link">用法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/restFramework/6路由.html#include与路由器一起使用" class="sidebar-link">include与路由器一起使用</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/6路由.html#额外操作的路由" class="sidebar-link">额外操作的路由</a></li></ul></li><li class="sidebar-sub-header"><a href="/python/restFramework/6路由.html#simplerouter" class="sidebar-link">SimpleRouter</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/6路由.html#defaultrouter" class="sidebar-link">DefaultRouter</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/6路由.html#自定义动态路线" class="sidebar-link">自定义动态路线</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/6路由.html#例" class="sidebar-link">例</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/6路由.html#高级自定义路由器" class="sidebar-link">高级自定义路由器</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/6路由.html#drf嵌套路由器" class="sidebar-link">DRF嵌套路由器</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/6路由.html#modelrouter-wq-db-rest" class="sidebar-link">ModelRouter（wq.db.rest）</a></li><li class="sidebar-sub-header"><a href="/python/restFramework/6路由.html#drf扩展" class="sidebar-link">DRF扩展</a></li></ul></li><li><a href="/python/restFramework/7解析器.html" class="sidebar-link">解析器(Parsers)</a></li><li><a href="/python/restFramework/8渲染器.html" class="sidebar-link">渲染器</a></li><li><a href="/python/restFramework/9序列化器.html" class="sidebar-link">Serializers</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-vpx-content content__default"><h1 id="routers"><a href="#routers" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/routers/#routers" target="_blank" rel="noopener noreferrer">Routers<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h1> <blockquote><p>资源路由允许您快速声明给定资源控制器的所有通用路由。无需为索引声明单独的路由，而是在单行代码中声明资源丰富的路由。</p> <p>— <a href="https://guides.rubyonrails.org/routing.html" target="_blank" rel="noopener noreferrer">Ruby on Rails文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>一些Web框架（例如Rails）提供了自动确定应用程序的URL应如何映射到处理传入请求的逻辑的功能。</p> <p>REST框架增加了对将自动URL路由到Django的支持，并为您提供了一种简单，快速且一致的方式将视图逻辑连接到一组URL。</p> <h2 id="用法"><a href="#用法" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/routers/#usage" target="_blank" rel="noopener noreferrer">用法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>这是一个使用的简单URL conf的示例<code>SimpleRouter</code>。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> routers

router <span class="token operator">=</span> routers<span class="token punctuation">.</span>SimpleRouter<span class="token punctuation">(</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">r'users'</span><span class="token punctuation">,</span> UserViewSet<span class="token punctuation">)</span>
router<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">r'accounts'</span><span class="token punctuation">,</span> AccountViewSet<span class="token punctuation">)</span>
urlpatterns <span class="token operator">=</span> router<span class="token punctuation">.</span>urls
</code></pre></div><p>该方法有两个强制性参数<code>register()</code>：</p> <ul><li><code>prefix</code> -用于这组路由的URL前缀。</li> <li><code>viewset</code> -视图集类。</li></ul> <p>（可选）您还可以指定其他参数：</p> <ul><li><code>basename</code>-用于创建的URL名称的基础。如果未设置，则基名称将基于<code>queryset</code>视图集的属性自动生成（如果有）。请注意，如果视图集不包含<code>queryset</code>属性，则必须<code>basename</code>在注册视图集时进行设置。</li></ul> <p>上面的示例将生成以下URL模式：</p> <ul><li>网址格式：<code>^users/$</code> 名称：<code>'user-list'</code></li> <li>网址格式：<code>^users/{pk}/$</code> 名称：<code>'user-detail'</code></li> <li>网址格式：<code>^accounts/$</code> 名称：<code>'account-list'</code></li> <li>网址格式：<code>^accounts/{pk}/$</code> 名称：<code>'account-detail'</code></li></ul> <hr> <p><strong>注意</strong>：该<code>basename</code>参数用于指定视图名称模式的初始部分。在上面的示例中，这就是“ <code>user</code>或” <code>account</code>部分。</p> <p>通常，您<em>不需要</em>指定<code>basename</code>参数，但是如果您有一个定义了自定义<code>get_queryset</code>方法的视图<code>.queryset</code>集，则该视图集可能没有属性集。如果尝试注册该视图集，则会看到类似以下错误：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token string">'basename'</span> argument <span class="token keyword">not</span> specified<span class="token punctuation">,</span> <span class="token keyword">and</span> could <span class="token keyword">not</span> automatically determine the name <span class="token keyword">from</span> the viewset<span class="token punctuation">,</span> <span class="token keyword">as</span> it does <span class="token keyword">not</span> have a <span class="token string">'.queryset'</span> attribute<span class="token punctuation">.</span>
</code></pre></div><p>这意味着<code>basename</code>注册视图集时需要显式设置参数，因为无法从模型名称自动确定该参数。</p> <hr> <h3 id="include与路由器一起使用"><a href="#include与路由器一起使用" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/routers/#using-include-with-routers" target="_blank" rel="noopener noreferrer"><code>include</code>与路由器一起使用<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p><code>.urls</code>路由器实例上的属性只是URL模式的标准列表。关于如何包含这些URL，有很多不同的样式。</p> <p>例如，您可以追加<code>router.urls</code>到现有视图的列表中...</p> <div class="language-python extra-class"><pre class="language-python"><code>router <span class="token operator">=</span> routers<span class="token punctuation">.</span>SimpleRouter<span class="token punctuation">(</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">r'users'</span><span class="token punctuation">,</span> UserViewSet<span class="token punctuation">)</span>
router<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">r'accounts'</span><span class="token punctuation">,</span> AccountViewSet<span class="token punctuation">)</span>

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    url<span class="token punctuation">(</span><span class="token string">r'^forgot-password/$'</span><span class="token punctuation">,</span> ForgotPasswordFormView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

urlpatterns <span class="token operator">+=</span> router<span class="token punctuation">.</span>urls
</code></pre></div><p>另外，您也可以使用Django的<code>include</code>功能，例如...</p> <div class="language-python extra-class"><pre class="language-python"><code>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    url<span class="token punctuation">(</span><span class="token string">r'^forgot-password/$'</span><span class="token punctuation">,</span> ForgotPasswordFormView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span>router<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p>您可以使用<code>include</code>应用程序名称空间：</p> <div class="language-python extra-class"><pre class="language-python"><code>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    url<span class="token punctuation">(</span><span class="token string">r'^forgot-password/$'</span><span class="token punctuation">,</span> ForgotPasswordFormView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^api/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span>urls<span class="token punctuation">,</span> <span class="token string">'app_name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p>或应用程序和实例名称空间：</p> <div class="language-python extra-class"><pre class="language-python"><code>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    url<span class="token punctuation">(</span><span class="token string">r'^forgot-password/$'</span><span class="token punctuation">,</span> ForgotPasswordFormView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^api/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span>urls<span class="token punctuation">,</span> <span class="token string">'app_name'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> namespace<span class="token operator">=</span><span class="token string">'instance_name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p>有关更多详细信息，请参见Django的<a href="https://docs.djangoproject.com/en/3.0/topics/http/urls/" target="_blank" rel="noopener noreferrer">URL名称空间文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>和<a href="https://docs.djangoproject.com/en/2.0/ref/urls/#include" target="_blank" rel="noopener noreferrer"><code>include</code>API参考<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <hr> <p><strong>注意</strong>：如果将命名空间与超链接的序列化程序一起使用，则还需要确保<code>view_name</code>序列化程序上的所有参数都能正确反映名称空间。在上面的示例中，您需要包括一个参数，例如<code>view_name='app_name:user-detail'</code>超链接到用户详细信息视图的序列化程序字段的参数 。</p> <p>自动<code>view_name</code>生成使用的模式<code>%(model_name)-detail</code>。除非您的模型名称实际发生冲突，否则在使用超链接序列化程序时最好<strong>不要为</strong> Django REST Framework视图命名。</p> <hr> <h3 id="额外操作的路由"><a href="#额外操作的路由" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/routers/#routing-for-extra-actions" target="_blank" rel="noopener noreferrer">额外操作的路由<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>视图集可以通过用装饰器装饰方法来<a href="https://www.django-rest-framework.org/api-guide/viewsets/#marking-extra-actions-for-routing" target="_blank" rel="noopener noreferrer">标记用于路由<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的<a href="https://www.django-rest-framework.org/api-guide/viewsets/#marking-extra-actions-for-routing" target="_blank" rel="noopener noreferrer">额外操作<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><code>@action</code>。这些额外的动作将包含在生成的路线中。例如，给定类的<code>set_password</code>方法<code>UserViewSet</code>：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> myapp<span class="token punctuation">.</span>permissions <span class="token keyword">import</span> IsAdminOrIsSelf
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>decorators <span class="token keyword">import</span> action

<span class="token keyword">class</span> <span class="token class-name">UserViewSet</span><span class="token punctuation">(</span>ModelViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token decorator annotation punctuation">@action</span><span class="token punctuation">(</span>methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> detail<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> permission_classes<span class="token operator">=</span><span class="token punctuation">[</span>IsAdminOrIsSelf<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">set_password</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> pk<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><p>将生成以下路线：</p> <ul><li>网址格式： <code>^users/{pk}/set_password/$</code></li> <li>网址名称： <code>'user-set-password'</code></li></ul> <p>默认情况下，URL模式基于方法命名，URL名称是<code>ViewSet.basename</code>和连字符方法名的组合。如果您不想对这些值中的任何一个使用默认值，您可以改为向<code>@action</code> 装饰器提供<code>url_path</code>和 <code>url_name</code>参数。</p> <p>例如，如果要将我们的自定义操作的URL更改为<code>^users/{pk}/change-password/$</code>，则可以编写：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> myapp<span class="token punctuation">.</span>permissions <span class="token keyword">import</span> IsAdminOrIsSelf
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>decorators <span class="token keyword">import</span> action

<span class="token keyword">class</span> <span class="token class-name">UserViewSet</span><span class="token punctuation">(</span>ModelViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token decorator annotation punctuation">@action</span><span class="token punctuation">(</span>methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> detail<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> permission_classes<span class="token operator">=</span><span class="token punctuation">[</span>IsAdminOrIsSelf<span class="token punctuation">]</span><span class="token punctuation">,</span>
            url_path<span class="token operator">=</span><span class="token string">'change-password'</span><span class="token punctuation">,</span> url_name<span class="token operator">=</span><span class="token string">'change_password'</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">set_password</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> pk<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><p>上面的示例现在将生成以下URL模式：</p> <ul><li>网址路径： <code>^users/{pk}/change-password/$</code></li> <li>网址名称： <code>'user-change_password'</code></li></ul> <h1 id="api指南"><a href="#api指南" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/routers/#api-guide" target="_blank" rel="noopener noreferrer">API指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h1> <h2 id="simplerouter"><a href="#simplerouter" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/routers/#simplerouter" target="_blank" rel="noopener noreferrer">SimpleRouter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>该路由器包括一套标准的途径<code>list</code>，<code>create</code>，<code>retrieve</code>，<code>update</code>，<code>partial_update</code>和<code>destroy</code>行动。视图集还可以使用<code>@action</code>装饰器标记路由的其他方法。</p> <table><thead><tr><th>URL Style</th> <th>HTTP Method</th> <th>Action</th> <th>URL Name</th></tr></thead> <tbody><tr><td>{prefix}/</td> <td>GET</td> <td>list</td> <td>{basename}-list</td></tr> <tr><td>POST</td> <td>create</td> <td></td> <td></td></tr> <tr><td>{prefix}/{url_path}/</td> <td>GET, 或由<code>methods</code>参数指定</td> <td><code>@action(detail=False)</code> decorated method</td> <td>{basename}-{url_name}</td></tr> <tr><td>{prefix}/{lookup}/</td> <td>GET</td> <td>retrieve</td> <td>{basename}-detail</td></tr> <tr><td>PUT</td> <td>update</td> <td></td> <td></td></tr> <tr><td>PATCH</td> <td>partial_update</td> <td></td> <td></td></tr> <tr><td>DELETE</td> <td>destroy</td> <td></td> <td></td></tr> <tr><td>{prefix}/{lookup}/{url_path}/</td> <td>GET, 或由<code>methods</code>参数指定</td> <td><code>@action(detail=True)</code> decorated method</td> <td>{basename}-{url_name}</td></tr></tbody></table> <p>默认情况下，<code>SimpleRoute</code>r创建的url会附加一个斜杠。在实例化路由器时，可以通过将尾部的斜杠参数设置为<code>False</code>来修改此行为。例如：</p> <div class="language-python extra-class"><pre class="language-python"><code>router <span class="token operator">=</span> SimpleRouter<span class="token punctuation">(</span>trailing_slash<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre></div><p>尾部的斜杠在Django中是常规的，但在其他一些框架（例如Rails）中默认不使用。尽管有些JavaScript框架可能期望使用特定的路由样式，但是选择使用哪种样式在很大程度上取决于首选项。</p> <p>路由器将匹配包含除斜杠和句点字符以外的任何字符的查找值。对于更严格（或更宽松）的查找模式，请<code>lookup_value_regex</code>在视图集上设置属性。例如，您可以将查找限制为有效的UUID：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">MyModelViewSet</span><span class="token punctuation">(</span>mixins<span class="token punctuation">.</span>RetrieveModelMixin<span class="token punctuation">,</span> viewsets<span class="token punctuation">.</span>GenericViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
    lookup_field <span class="token operator">=</span> <span class="token string">'my_model_id'</span>
    lookup_value_regex <span class="token operator">=</span> <span class="token string">'[0-9a-f]{32}'</span>
</code></pre></div><h2 id="defaultrouter"><a href="#defaultrouter" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/routers/#defaultrouter" target="_blank" rel="noopener noreferrer">DefaultRouter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>该路由器与<code>SimpleRouter</code>上面类似，但是还包括一个默认的API根视图，该根视图返回一个响应，其中包含指向所有列表视图的超链接。它还为可选<code>.json</code>样式格式后缀生成路由。</p> <table><thead><tr><th>URL Style</th> <th>HTTP Method</th> <th>Action</th> <th>URL Name</th></tr></thead> <tbody><tr><td>[.format]</td> <td>GET</td> <td>自动生成的根视图</td> <td>api-root</td></tr> <tr><td>{prefix}/[.format]</td> <td>GET</td> <td>list</td> <td>{basename}-list</td></tr> <tr><td>POST</td> <td>create</td> <td></td> <td></td></tr> <tr><td>{prefix}/{url_path}/[.format]</td> <td>GET, 或由“methods”参数指定</td> <td><code>@action(detail=False)</code> decorated method</td> <td>{basename}-{url_name}</td></tr> <tr><td>{prefix}/{lookup}/[.format]</td> <td>GET</td> <td>retrieve</td> <td>{basename}-detail</td></tr> <tr><td>PUT</td> <td>update</td> <td></td> <td></td></tr> <tr><td>PATCH</td> <td>partial_update</td> <td></td> <td></td></tr> <tr><td>DELETE</td> <td>destroy</td> <td></td> <td></td></tr> <tr><td>{prefix}/{lookup}/{url_path}/[.format]</td> <td>GET, 或由“methods”参数指定</td> <td><code>@action(detail=True)</code> decorated method</td> <td>{basename}-{url_name}</td></tr></tbody></table> <p>与<code>SimpleRouter</code>一样，在实例化路由器时，可以通过将<code>trailing_slash</code>参数设置为<code>False</code>来删除URL路由上的尾部斜杠。</p> <div class="language-python extra-class"><pre class="language-python"><code>router <span class="token operator">=</span> DefaultRouter<span class="token punctuation">(</span>trailing_slash<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre></div><h1 id="自定义路由器"><a href="#自定义路由器" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/routers/#custom-routers" target="_blank" rel="noopener noreferrer">自定义路由器<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h1> <p>实施定制路由器并不是您经常需要做的事情，但是如果您对API的URL的结构有特定要求，这将很有用。这样做可以使您以可重用的方式封装URL结构，从而确保您不必为每个新视图明确编写URL模式。</p> <p>实现自定义路由器的最简单方法是将现有路由器类之一作为子类。该<code>.routes</code>属性用于模板化将映射到每个视图集的URL模式。该<code>.routes</code>属性是<code>Route</code>命名元组的列表。</p> <p><code>Route</code>命名元组的参数为：</p> <p><strong>url</strong>：一个字符串，代表要路由的URL。可能包含以下格式字符串：</p> <ul><li><code>{prefix}</code> -用于这组路由的URL前缀。</li> <li><code>{lookup}</code> -用于与单个实例匹配的查找字段。</li> <li><code>{trailing_slash}</code>-根据<code>trailing_slash</code>参数，是'/'还是空字符串。</li></ul> <p><strong>mapping</strong>：HTTP方法名称到视图方法的映射</p> <p><strong>name</strong>：<code>reverse</code>呼叫中使用的URL名称。可能包含以下格式字符串：</p> <ul><li><code>{basename}</code> -用于创建的URL名称的基础。</li></ul> <p><strong>initkwargs</strong>：实例化视图时应传递的所有其他参数的字典。请注意，<code>detail</code>，<code>basename</code>，和<code>suffix</code>参数保留给视图集中内省和也使用可浏览的API生成视图名称和面包屑链接。</p> <h2 id="自定义动态路线"><a href="#自定义动态路线" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/routers/#customizing-dynamic-routes" target="_blank" rel="noopener noreferrer">自定义动态路线<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>您还可以自定义<code>@action</code>装饰器的路由方式。<code>DynamicRoute</code>在<code>.routes</code>列表中包括命名的元组，将<code>detail</code>参数设置为适用于基于列表的路由和基于详细信息的路由。除了<code>detail</code>，参数为<code>DynamicRoute</code>：</p> <p><strong>url</strong>：一个字符串，代表要路由的URL。可能包含与相同的格式字符串<code>Route</code>，并且另外接受<code>{url_path}</code>格式字符串。</p> <p><strong>name</strong>：<code>reverse</code>呼叫中使用的URL名称。可能包含以下格式字符串：</p> <ul><li><code>{basename}</code> -用于创建的URL名称的基础。</li> <li><code>{url_name}</code>- <code>url_name</code>提供给<code>@action</code>。</li></ul> <p><strong>initkwargs</strong>：实例化视图时应传递的所有其他参数的字典。</p> <h2 id="例"><a href="#例" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/routers/#example" target="_blank" rel="noopener noreferrer">例<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>以下示例将仅路由到<code>list</code>和<code>retrieve</code>操作，并且不使用尾部斜杠约定。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>routers <span class="token keyword">import</span> Route<span class="token punctuation">,</span> DynamicRoute<span class="token punctuation">,</span> SimpleRouter

<span class="token keyword">class</span> <span class="token class-name">CustomReadOnlyRouter</span><span class="token punctuation">(</span>SimpleRouter<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    A router for read-only APIs, which doesn't use trailing slashes.
    &quot;&quot;&quot;</span>
    routes <span class="token operator">=</span> <span class="token punctuation">[</span>
        Route<span class="token punctuation">(</span>
            url<span class="token operator">=</span><span class="token string">r'^{prefix}$'</span><span class="token punctuation">,</span>
            mapping<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'get'</span><span class="token punctuation">:</span> <span class="token string">'list'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            name<span class="token operator">=</span><span class="token string">'{basename}-list'</span><span class="token punctuation">,</span>
            detail<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>
            initkwargs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'suffix'</span><span class="token punctuation">:</span> <span class="token string">'List'</span><span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        Route<span class="token punctuation">(</span>
            url<span class="token operator">=</span><span class="token string">r'^{prefix}/{lookup}$'</span><span class="token punctuation">,</span>
            mapping<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'get'</span><span class="token punctuation">:</span> <span class="token string">'retrieve'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            name<span class="token operator">=</span><span class="token string">'{basename}-detail'</span><span class="token punctuation">,</span>
            detail<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
            initkwargs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'suffix'</span><span class="token punctuation">:</span> <span class="token string">'Detail'</span><span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        DynamicRoute<span class="token punctuation">(</span>
            url<span class="token operator">=</span><span class="token string">r'^{prefix}/{lookup}/{url_path}$'</span><span class="token punctuation">,</span>
            name<span class="token operator">=</span><span class="token string">'{basename}-{url_name}'</span><span class="token punctuation">,</span>
            detail<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
            initkwargs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
</code></pre></div><p>让我们看一下我们<code>CustomReadOnlyRouter</code>将为简单视图集生成的路线。</p> <p><code>views.py</code>：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">UserViewSet</span><span class="token punctuation">(</span>viewsets<span class="token punctuation">.</span>ReadOnlyModelViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    A viewset that provides the standard actions
    &quot;&quot;&quot;</span>
    queryset <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    serializer_class <span class="token operator">=</span> UserSerializer
    lookup_field <span class="token operator">=</span> <span class="token string">'username'</span>

    <span class="token decorator annotation punctuation">@action</span><span class="token punctuation">(</span>detail<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">group_names</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> pk<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        Returns a list of all the group names that the given
        user belongs to.
        &quot;&quot;&quot;</span>
        user <span class="token operator">=</span> self<span class="token punctuation">.</span>get_object<span class="token punctuation">(</span><span class="token punctuation">)</span>
        groups <span class="token operator">=</span> user<span class="token punctuation">.</span>groups<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token punctuation">[</span>group<span class="token punctuation">.</span>name <span class="token keyword">for</span> group <span class="token keyword">in</span> groups<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p><code>urls.py</code>：</p> <div class="language-python extra-class"><pre class="language-python"><code>router <span class="token operator">=</span> CustomReadOnlyRouter<span class="token punctuation">(</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">,</span> UserViewSet<span class="token punctuation">)</span>
urlpatterns <span class="token operator">=</span> router<span class="token punctuation">.</span>urls
</code></pre></div><p>将生成以下映射...</p> <table><thead><tr><th>URL</th> <th>HTTP Method</th> <th>Action</th> <th>URL Name</th></tr></thead> <tbody><tr><td>/users</td> <td>GET</td> <td>list</td> <td>user-list</td></tr> <tr><td>/users/{username}</td> <td>GET</td> <td>retrieve</td> <td>user-detail</td></tr> <tr><td>/users/{username}/group_names</td> <td>GET</td> <td>group_names</td> <td>user-group-names</td></tr></tbody></table> <p>有关设置<code>.routes</code>属性的另一个示例，请参见<code>SimpleRouter</code>该类的源代码。</p> <h2 id="高级自定义路由器"><a href="#高级自定义路由器" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/routers/#advanced-custom-routers" target="_blank" rel="noopener noreferrer">高级自定义路由器<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>如果要提供完全自定义的行为，则可以重写<code>BaseRouter</code>和重写该<code>get_urls(self)</code>方法。该方法应检查已注册的视图集并返回URL模式列表。可以通过访问<code>self.registry</code>属性来检查已注册的前缀，视图集和基本名称元组。</p> <p>您可能还想覆盖该<code>get_default_basename(self, viewset)</code>方法，或者<code>basename</code>在向路由器注册视图集时始终显式设置参数。</p> <h1 id="第三方软件包"><a href="#第三方软件包" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/routers/#third-party-packages" target="_blank" rel="noopener noreferrer">第三方软件包<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h1> <p>以下第三方软件包也可用。</p> <h2 id="drf嵌套路由器"><a href="#drf嵌套路由器" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/routers/#drf-nested-routers" target="_blank" rel="noopener noreferrer">DRF嵌套路由器<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>的<a href="https://github.com/alanjds/drf-nested-routers" target="_blank" rel="noopener noreferrer">DRF-嵌套的路由器包<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>提供路由器和关系字段用于与嵌套资源工作。</p> <h2 id="modelrouter-wq-db-rest"><a href="#modelrouter-wq-db-rest" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/routers/#modelrouter-wqdbrest" target="_blank" rel="noopener noreferrer">ModelRouter（wq.db.rest）<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>所述<a href="https://wq.io/wq.db" target="_blank" rel="noopener noreferrer">wq.db包<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>提供了一个先进<a href="https://wq.io/docs/router" target="_blank" rel="noopener noreferrer">ModelRouter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>延伸类（和单个实例）<code>DefaultRouter</code>用<code>register_model()</code>的API。就像Django一样<code>admin.site.register</code>，唯一需要的参数<code>rest.router.register_model</code>是模型类。可以从模型和全局配置中推断出URL前缀，序列化程序和视图集的合理默认值。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> wq<span class="token punctuation">.</span>db <span class="token keyword">import</span> rest
<span class="token keyword">from</span> myapp<span class="token punctuation">.</span>models <span class="token keyword">import</span> MyModel

rest<span class="token punctuation">.</span>router<span class="token punctuation">.</span>register_model<span class="token punctuation">(</span>MyModel<span class="token punctuation">)</span>
</code></pre></div><h2 id="drf扩展"><a href="#drf扩展" class="header-anchor">#</a> <a href="https://www.django-rest-framework.org/api-guide/routers/#drf-extensions" target="_blank" rel="noopener noreferrer">DRF扩展<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>该<a href="https://chibisov.github.io/drf-extensions/docs/" target="_blank" rel="noopener noreferrer"><code>DRF-extensions</code>软件包<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>提供了<a href="https://chibisov.github.io/drf-extensions/docs/#routers" target="_blank" rel="noopener noreferrer">路由器<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>创建<a href="https://chibisov.github.io/drf-extensions/docs/#nested-routes" target="_blank" rel="noopener noreferrer">嵌套viewsets<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，<a href="https://chibisov.github.io/drf-extensions/docs/#collection-level-controllers" target="_blank" rel="noopener noreferrer">收藏级控制器<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>与<a href="https://chibisov.github.io/drf-extensions/docs/#controller-endpoint-name" target="_blank" rel="noopener noreferrer">定制的端点名<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p></div> <!----> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/python/restFramework/5视图集.html" class="prev">
        ViewSets
      </a></span> <span class="next"><a href="/python/restFramework/7解析器.html">
        解析器(Parsers)
      </a>
      →
    </span></p></div> <div class="page-footer"><ul class="inner"><li>Theme by <a href="https://github.com/qcyblm/vuepress-theme-vpx" title="本站主题" target="_blank" rel="noopener noreferrer">VPX</a></li> <li>Powered by <a href="https://www.vuepress.cn/" target="_blank" rel="noopener noreferrer">VuePress</a></li> <!----> <li>
      © 2018-2021
      <a href="https://xuqilong.top" target="_blank" rel="noopener noreferrer"> Copyright © 2021-present Qilong Xu © 2019 </a></li> <li><a href="https://beian.miit.gov.cn" target="_blank" rel="noopener noreferrer"><!---->  粤ICP备19034953号-1
      </a></li> </ul></div> </main> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.b8069efc.js" defer></script><script src="/assets/js/2.463f0d24.js" defer></script><script src="/assets/js/46.72ff2f55.js" defer></script>
  </body>
</html>
