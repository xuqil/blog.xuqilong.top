(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{415:function(e,r,t){"use strict";t.r(r);var a=t(11),_=Object(a.a)({},(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"requests"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#requests"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/requests/#requests",target:"_blank",rel:"noopener noreferrer"}},[e._v("Requests"),t("OutboundLink")],1)]),e._v(" "),t("blockquote",[t("p",[e._v("如果您正在做基于REST的Web服务...则应忽略request.POST。")]),e._v(" "),t("p",[e._v("— "),t("a",{attrs:{href:"https://groups.google.com/d/topic/django-developers/dxI4qVzrBY4/discussion",target:"_blank",rel:"noopener noreferrer"}},[e._v("Django开发人员小组"),t("OutboundLink")],1),e._v(" Malcom Tredinnick")])]),e._v(" "),t("p",[e._v("REST框架的"),t("code",[e._v("Request")]),e._v("类扩展了标准"),t("code",[e._v("HttpRequest")]),e._v("，增加了对REST框架的灵活请求解析和请求身份验证的支持。")]),e._v(" "),t("hr"),e._v(" "),t("h1",{attrs:{id:"request-解析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#request-解析"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/requests/#request-parsing",target:"_blank",rel:"noopener noreferrer"}},[e._v("Request 解析"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("REST框架的Request对象提供了灵活的请求解析，使您能够以与通常处理表单数据相同的方式来处理JSON数据或其他媒体类型的请求。")]),e._v(" "),t("h2",{attrs:{id:"data"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#data"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/requests/#data",target:"_blank",rel:"noopener noreferrer"}},[e._v(".data"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("code",[e._v("request.data")]),e._v("返回请求正文的解析内容。这类似于标准"),t("code",[e._v("request.POST")]),e._v("和"),t("code",[e._v("request.FILES")]),e._v("属性，除了：")]),e._v(" "),t("ul",[t("li",[e._v("它包括所有已解析的内容，包括"),t("em",[e._v("文件和非文件")]),e._v("输入。")]),e._v(" "),t("li",[e._v("它支持解析除以外的HTTP方法的内容"),t("code",[e._v("POST")]),e._v("，这意味着您可以访问"),t("code",[e._v("PUT")]),e._v("和"),t("code",[e._v("PATCH")]),e._v("请求的内容。")]),e._v(" "),t("li",[e._v("它支持REST框架的灵活请求解析，而不仅仅是支持表单数据。例如，您可以以处理传入表单数据的相同方式处理传入JSON数据。")])]),e._v(" "),t("p",[e._v("有关更多详细信息，请参见"),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/",target:"_blank",rel:"noopener noreferrer"}},[e._v("解析器文档"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("h2",{attrs:{id:"query-params"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#query-params"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/requests/#query_params",target:"_blank",rel:"noopener noreferrer"}},[e._v(".query_params"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("code",[e._v("request.query_params")]),e._v("是的更正确命名的同义词"),t("code",[e._v("request.GET")]),e._v("。")]),e._v(" "),t("p",[e._v("为了使代码内部更清晰，我们建议使用"),t("code",[e._v("request.query_params")]),e._v("，而不是Django的standard "),t("code",[e._v("request.GET")]),e._v("。这样做将有助于使您的代码库更加正确和明显-任何HTTP方法类型都可以包括查询参数，而不仅仅是"),t("code",[e._v("GET")]),e._v("请求。")]),e._v(" "),t("h2",{attrs:{id:"parsers"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#parsers"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/requests/#parsers",target:"_blank",rel:"noopener noreferrer"}},[e._v(".parsers"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("在"),t("code",[e._v("APIView")]),e._v("类或"),t("code",[e._v("@api_view")]),e._v("装饰将确保这个属性被自动设置为列表"),t("code",[e._v("Parser")]),e._v("实例的基础上，"),t("code",[e._v("parser_classes")]),e._v("对视图设置或基于该"),t("code",[e._v("DEFAULT_PARSER_CLASSES")]),e._v("设置。")]),e._v(" "),t("p",[e._v("您通常不需要访问此属性。")]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("**注意：**如果客户端发送格式错误的内容，则访问"),t("code",[e._v("request.data")]),e._v("可能会引发"),t("code",[e._v("ParseError")]),e._v("。默认情况下，REST框架的"),t("code",[e._v("APIView")]),e._v("类或"),t("code",[e._v("@api_view")]),e._v("装饰器将捕获错误并返回"),t("code",[e._v("400 Bad Request")]),e._v("响应。")]),e._v(" "),t("p",[e._v("如果客户端发送的请求的内容类型无法解析，则将"),t("code",[e._v("UnsupportedMediaType")]),e._v("引发异常，默认情况下将捕获该异常并返回"),t("code",[e._v("415 Unsupported Media Type")]),e._v("响应。")]),e._v(" "),t("hr"),e._v(" "),t("h1",{attrs:{id:"内容协商"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#内容协商"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/requests/#content-negotiation",target:"_blank",rel:"noopener noreferrer"}},[e._v("内容协商"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("该请求公开了一些属性，使您可以确定内容协商阶段的结果。这使您可以实现一些行为，例如为不同的媒体类型选择不同的序列化方案。")]),e._v(" "),t("h2",{attrs:{id:"accepted-renderer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#accepted-renderer"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/requests/#accepted_renderer",target:"_blank",rel:"noopener noreferrer"}},[e._v(".accepted_renderer"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("内容协商阶段选择的渲染器实例。")]),e._v(" "),t("h2",{attrs:{id:"accepted-media-type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#accepted-media-type"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/requests/#accepted_media_type",target:"_blank",rel:"noopener noreferrer"}},[e._v(".accepted_media_type"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("一个字符串，表示内容协商阶段接受的媒体类型。")]),e._v(" "),t("hr"),e._v(" "),t("h1",{attrs:{id:"认证方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#认证方式"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/requests/#authentication",target:"_blank",rel:"noopener noreferrer"}},[e._v("认证方式"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("REST框架提供了灵活的按请求身份验证，使您能够：")]),e._v(" "),t("ul",[t("li",[e._v("对API的不同部分使用不同的身份验证策略。")]),e._v(" "),t("li",[e._v("支持使用多种身份验证策略。")]),e._v(" "),t("li",[e._v("提供与传入请求关联的用户和令牌信息。")])]),e._v(" "),t("h2",{attrs:{id:"user"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#user"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/requests/#user",target:"_blank",rel:"noopener noreferrer"}},[e._v(".user"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("code",[e._v("request.user")]),e._v("通常会返回的实例"),t("code",[e._v("django.contrib.auth.models.User")]),e._v("，尽管其行为取决于所使用的身份验证策略。")]),e._v(" "),t("p",[e._v("如果请求未经身份验证，则默认值为"),t("code",[e._v("request.user")]),e._v("的实例"),t("code",[e._v("django.contrib.auth.models.AnonymousUser")]),e._v("。")]),e._v(" "),t("p",[e._v("有关更多详细信息，请参见"),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/authentication/",target:"_blank",rel:"noopener noreferrer"}},[e._v("身份验证文档"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("h2",{attrs:{id:"auth"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#auth"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/requests/#auth",target:"_blank",rel:"noopener noreferrer"}},[e._v(".auth"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("code",[e._v("request.auth")]),e._v("返回任何其他身份验证上下文。的确切行为"),t("code",[e._v("request.auth")]),e._v("取决于所使用的身份验证策略，但通常可能是身份验证请求所依据的令牌的实例。")]),e._v(" "),t("p",[e._v("如果该请求是未认证的，或者如果没有附加上下文存在时，默认值"),t("code",[e._v("request.auth")]),e._v("是"),t("code",[e._v("None")]),e._v("。")]),e._v(" "),t("p",[e._v("有关更多详细信息，请参见"),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/authentication/",target:"_blank",rel:"noopener noreferrer"}},[e._v("身份验证文档"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("h2",{attrs:{id:"authenticators"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#authenticators"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/requests/#authenticators",target:"_blank",rel:"noopener noreferrer"}},[e._v(".authenticators"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("在"),t("code",[e._v("APIView")]),e._v("类或"),t("code",[e._v("@api_view")]),e._v("装饰将确保这个属性被自动设置为列表"),t("code",[e._v("Authentication")]),e._v("实例的基础上，"),t("code",[e._v("authentication_classes")]),e._v("对视图设置或基于该"),t("code",[e._v("DEFAULT_AUTHENTICATORS")]),e._v("设置。")]),e._v(" "),t("p",[e._v("您通常不需要访问此属性。")]),e._v(" "),t("hr"),e._v(" "),t("p",[t("strong",[e._v("注意：")]),t("code",[e._v("WrappedAttributeError")]),e._v("调用"),t("code",[e._v(".user")]),e._v("或"),t("code",[e._v(".auth")]),e._v("属性时，您可能会看到一个凸起。这些错误源自作为标准的身份验证器"),t("code",[e._v("AttributeError")]),e._v("，但是有必要将它们重新引发为其他异常类型，以防止外部属性访问抑制它们。Python不会识别出"),t("code",[e._v("AttributeError")]),e._v("源于身份验证器，而是会假设请求对象没有"),t("code",[e._v(".user")]),e._v("或"),t("code",[e._v(".auth")]),e._v("属性。身份验证器将需要固定。")]),e._v(" "),t("hr"),e._v(" "),t("h1",{attrs:{id:"浏览器增强"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#浏览器增强"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/requests/#browser-enhancements",target:"_blank",rel:"noopener noreferrer"}},[e._v("浏览器增强"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("REST框架支持的几个浏览器增强功能，例如基于浏览器的"),t("code",[e._v("PUT")]),e._v("，"),t("code",[e._v("PATCH")]),e._v("和"),t("code",[e._v("DELETE")]),e._v("形式。")]),e._v(" "),t("h2",{attrs:{id:"method"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#method"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/requests/#method",target:"_blank",rel:"noopener noreferrer"}},[e._v(".method"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("code",[e._v("request.method")]),e._v("返回请求的HTTP方法的"),t("strong",[e._v("大写")]),e._v("字符串表示形式。")]),e._v(" "),t("p",[e._v("基于浏览器的"),t("code",[e._v("PUT")]),e._v("，"),t("code",[e._v("PATCH")]),e._v("而"),t("code",[e._v("DELETE")]),e._v("形式是透明的支持。")]),e._v(" "),t("p",[e._v("有关更多信息，请参阅"),t("a",{attrs:{href:"https://www.django-rest-framework.org/topics/browser-enhancements/",target:"_blank",rel:"noopener noreferrer"}},[e._v("浏览器增强功能文档"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("h2",{attrs:{id:"content-type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#content-type"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/requests/#content_type",target:"_blank",rel:"noopener noreferrer"}},[e._v(".content_type"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("code",[e._v("request.content_type")]),e._v("，返回代表HTTP请求主体的媒体类型的字符串对象，如果未提供媒体类型，则返回空字符串。")]),e._v(" "),t("p",[e._v("通常，您通常不需要直接访问请求的内容类型，因为您通常将依赖于REST框架的默认请求解析行为。")]),e._v(" "),t("p",[e._v("如果确实需要访问请求的内容类型，则应"),t("code",[e._v(".content_type")]),e._v("优先使用属性而不是using "),t("code",[e._v("request.META.get('HTTP_CONTENT_TYPE')")]),e._v("，因为它为基于浏览器的非格式内容提供了透明的支持。")]),e._v(" "),t("p",[e._v("有关更多信息，请参阅"),t("a",{attrs:{href:"https://www.django-rest-framework.org/topics/browser-enhancements/",target:"_blank",rel:"noopener noreferrer"}},[e._v("浏览器增强功能文档"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("h2",{attrs:{id:"stream"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stream"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/requests/#stream",target:"_blank",rel:"noopener noreferrer"}},[e._v(".stream"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("code",[e._v("request.stream")]),e._v(" 返回表示请求正文内容的流。")]),e._v(" "),t("p",[e._v("通常，您通常不需要直接访问请求的内容，因为您通常会依赖REST框架的默认请求解析行为。")]),e._v(" "),t("hr"),e._v(" "),t("h1",{attrs:{id:"标准httprequest属性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#标准httprequest属性"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/requests/#standard-httprequest-attributes",target:"_blank",rel:"noopener noreferrer"}},[e._v("标准HttpRequest属性"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("随着REST框架对"),t("code",[e._v("Request")]),e._v("Django 的扩展"),t("code",[e._v("HttpRequest")]),e._v("，所有其他标准属性和方法也都可用。例如"),t("code",[e._v("request.META")]),e._v("和"),t("code",[e._v("request.session")]),e._v("字典可以正常使用。")]),e._v(" "),t("p",[e._v("请注意，由于实现原因，"),t("code",[e._v("Request")]),e._v("该类不继承自"),t("code",[e._v("HttpRequest")]),e._v("类，而是使用composition扩展了该类。")])])}),[],!1,null,null,null);r.default=_.exports}}]);