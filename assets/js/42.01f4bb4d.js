(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{427:function(e,r,t){"use strict";t.r(r);var a=t(11),s=Object(a.a)({},(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"responses"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#responses"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/responses/#responses",target:"_blank",rel:"noopener noreferrer"}},[e._v("Responses"),t("OutboundLink")],1)]),e._v(" "),t("blockquote",[t("p",[e._v("与基本的HttpResponse对象不同，TemplateResponse对象保留视图提供的上下文详细信息以计算响应。直到需要时才在响应过程的后面计算响应的最终输出。")]),e._v(" "),t("p",[e._v("— "),t("a",{attrs:{href:"https://docs.djangoproject.com/en/stable/ref/template-response/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Django文档"),t("OutboundLink")],1)])]),e._v(" "),t("p",[e._v("REST框架通过提供一个"),t("code",[e._v("Response")]),e._v("类来支持HTTP内容协商，该类允许您根据客户端请求返回可以呈现为多种内容类型的内容。")]),e._v(" "),t("p",[e._v("在"),t("code",[e._v("Response")]),e._v("类的子类Django的"),t("code",[e._v("SimpleTemplateResponse")]),e._v("。 "),t("code",[e._v("Response")]),e._v("对象使用数据初始化，该数据应包含本地Python原语。然后，REST框架使用标准的HTTP内容协商来确定应如何呈现最终响应内容。")]),e._v(" "),t("p",[e._v("不需要使用"),t("code",[e._v("Response")]),e._v("该类，也可以根据需要从视图中返回常规"),t("code",[e._v("HttpResponse")]),e._v("或"),t("code",[e._v("StreamingHttpResponse")]),e._v("对象。使用"),t("code",[e._v("Response")]),e._v("该类只是为返回内容协商的Web API响应提供了一个更好的接口，该响应可以呈现为多种格式。")]),e._v(" "),t("p",[e._v("除非出于某种原因要大量定制REST框架，否则应始终对返回对象的视图使用"),t("code",[e._v("APIView")]),e._v("类或"),t("code",[e._v("@api_view")]),e._v("函数"),t("code",[e._v("Response")]),e._v("。这样做可确保在视图返回视图之前，视图可以执行内容协商并为响应选择适当的渲染器。")]),e._v(" "),t("hr"),e._v(" "),t("h1",{attrs:{id:"建立回应"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#建立回应"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/responses/#creating-responses",target:"_blank",rel:"noopener noreferrer"}},[e._v("建立回应"),t("OutboundLink")],1)]),e._v(" "),t("h2",{attrs:{id:"response"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#response"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/responses/#response",target:"_blank",rel:"noopener noreferrer"}},[e._v("Response()"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("strong",[e._v("签名：")]),e._v(" "),t("code",[e._v("Response(data, status=None, template_name=None, headers=None, content_type=None)")])]),e._v(" "),t("p",[e._v("与常规"),t("code",[e._v("HttpResponse")]),e._v("对象不同，您不会实例化"),t("code",[e._v("Response")]),e._v("具有渲染内容的对象。相反，您传递未渲染的数据，该数据可能包含任何Python原语。")]),e._v(" "),t("p",[t("code",[e._v("Response")]),e._v("该类使用的渲染器无法本地处理诸如Django模型实例之类的复杂数据类型，因此您需要在创建"),t("code",[e._v("Response")]),e._v("对象之前将数据序列化为原始数据类型。")]),e._v(" "),t("p",[e._v("您可以使用REST框架的"),t("code",[e._v("Serializer")]),e._v("类来执行此数据序列化，也可以使用自己的自定义序列化。")]),e._v(" "),t("p",[e._v("参数：")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("data")]),e._v("：响应的序列化数据。")]),e._v(" "),t("li",[t("code",[e._v("status")]),e._v("：响应的状态码。默认值为200。另请参见"),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/status-codes/",target:"_blank",rel:"noopener noreferrer"}},[e._v("状态码"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("li",[t("code",[e._v("template_name")]),e._v("："),t("code",[e._v("HTMLRenderer")]),e._v("选择了要使用的模板名称。")]),e._v(" "),t("li",[t("code",[e._v("headers")]),e._v("：在响应中使用的HTTP标头字典。")]),e._v(" "),t("li",[t("code",[e._v("content_type")]),e._v("：响应的内容类型。通常，这将由呈现器根据内容协商确定自动设置，但是在某些情况下，您需要显式指定内容类型。")])]),e._v(" "),t("hr"),e._v(" "),t("h1",{attrs:{id:"属性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#属性"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/responses/#attributes",target:"_blank",rel:"noopener noreferrer"}},[e._v("属性"),t("OutboundLink")],1)]),e._v(" "),t("h2",{attrs:{id:"data"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#data"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/responses/#data",target:"_blank",rel:"noopener noreferrer"}},[e._v(".data"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("响应的未呈现的序列化数据。")]),e._v(" "),t("h2",{attrs:{id:"status-code"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#status-code"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/responses/#status_code",target:"_blank",rel:"noopener noreferrer"}},[e._v(".status_code"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("HTTP响应的数字状态码。")]),e._v(" "),t("h2",{attrs:{id:"content"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#content"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/responses/#content",target:"_blank",rel:"noopener noreferrer"}},[e._v(".content"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("响应的呈现内容。必须先调用"),t("code",[e._v(".render()")]),e._v("方法，然后"),t("code",[e._v(".content")]),e._v("才能访问该方法。")]),e._v(" "),t("h2",{attrs:{id:"template-name"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#template-name"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/responses/#template_name",target:"_blank",rel:"noopener noreferrer"}},[e._v(".template_name"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("的"),t("code",[e._v("template_name")]),e._v("，如果提供。仅当"),t("code",[e._v("HTMLRenderer")]),e._v("或其他自定义模板渲染器是响应的可接受渲染器时才需要。")]),e._v(" "),t("h2",{attrs:{id:"accepted-renderer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#accepted-renderer"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/responses/#accepted_renderer",target:"_blank",rel:"noopener noreferrer"}},[e._v(".accepted_renderer"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("将用于呈现响应的呈现器实例。")]),e._v(" "),t("p",[e._v("由"),t("code",[e._v("APIView")]),e._v("或"),t("code",[e._v("@api_view")]),e._v("在视图返回响应之前自动设置。")]),e._v(" "),t("h2",{attrs:{id:"accepted-media-type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#accepted-media-type"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/responses/#accepted_media_type",target:"_blank",rel:"noopener noreferrer"}},[e._v(".accepted_media_type"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("内容协商阶段选择的媒体类型。")]),e._v(" "),t("p",[e._v("由"),t("code",[e._v("APIView")]),e._v("或"),t("code",[e._v("@api_view")]),e._v("在视图返回响应之前自动设置。")]),e._v(" "),t("h2",{attrs:{id:"renderer-context"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#renderer-context"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/responses/#renderer_context",target:"_blank",rel:"noopener noreferrer"}},[e._v(".renderer_context"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("附加上下文信息的词典，该词典将传递给渲染器的"),t("code",[e._v(".render()")]),e._v("方法。")]),e._v(" "),t("p",[e._v("由"),t("code",[e._v("APIView")]),e._v("或"),t("code",[e._v("@api_view")]),e._v("在视图返回响应之前自动设置。")]),e._v(" "),t("hr"),e._v(" "),t("h1",{attrs:{id:"标准httpresponse属性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#标准httpresponse属性"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/responses/#standard-httpresponse-attributes",target:"_blank",rel:"noopener noreferrer"}},[e._v("标准HttpResponse属性"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("在"),t("code",[e._v("Response")]),e._v("类扩展"),t("code",[e._v("SimpleTemplateResponse")]),e._v("，和所有常见的属性和方法也可在回应。例如，您可以以标准方式在响应上设置标头：")]),e._v(" "),t("div",{staticClass:"language-python extra-class"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[e._v("response "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" Response"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\nresponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Cache-Control'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'no-cache'")]),e._v("\n")])])]),t("h2",{attrs:{id:"render"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#render"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/responses/#render",target:"_blank",rel:"noopener noreferrer"}},[e._v(".render（）"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("strong",[e._v("签名：")]),e._v(" "),t("code",[e._v(".render()")])]),e._v(" "),t("p",[e._v("与任何其他"),t("code",[e._v("TemplateResponse")]),e._v("方法一样，调用此方法可将响应的序列化数据呈现为最终响应内容。当"),t("code",[e._v(".render()")]),e._v("被调用时，响应内容将被设置为调用的结果"),t("code",[e._v(".render(data, accepted_media_type, renderer_context)")]),e._v("对方法"),t("code",[e._v("accepted_renderer")]),e._v("实例。")]),e._v(" "),t("p",[e._v("通常，您不需要自称"),t("code",[e._v(".render()")]),e._v("，因为它是Django的标准响应周期所处理的。")])])}),[],!1,null,null,null);r.default=s.exports}}]);