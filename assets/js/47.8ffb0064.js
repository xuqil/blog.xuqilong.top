(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{429:function(t,a,r){"use strict";r.r(a);var e=r(11),s=Object(e.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"解析器-parsers"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#解析器-parsers"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#parsers",target:"_blank",rel:"noopener noreferrer"}},[t._v("解析器(Parsers)"),r("OutboundLink")],1)]),t._v(" "),r("blockquote",[r("p",[t._v("机器交互Web服务倾向于使用比表单编码更多的结构化格式来发送数据，因为它们发送的数据比简单表单还要复杂。")]),t._v(" "),r("p",[t._v("— "),r("a",{attrs:{href:"https://groups.google.com/d/topic/django-developers/dxI4qVzrBY4/discussion",target:"_blank",rel:"noopener noreferrer"}},[t._v("Django开发人员小组"),r("OutboundLink")],1),t._v(" Malcom Tredinnick")])]),t._v(" "),r("p",[t._v("REST框架包括许多内置的Parser类，使您可以接受各种媒体类型的请求。还支持定义自己的自定义解析器，这使您可以灵活地设计API接受的媒体类型。")]),t._v(" "),r("h2",{attrs:{id:"如何确定解析器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#如何确定解析器"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#how-the-parser-is-determined",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何确定解析器"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("视图的有效解析器集始终定义为类列表。当 "),r("code",[t._v("request.data")]),t._v("被访问时，REST框架将检查"),r("code",[t._v("Content-Type")]),t._v("传入请求上的标头，并确定使用哪个解析器来解析请求内容。")]),t._v(" "),r("hr"),t._v(" "),r("p",[r("strong",[t._v("注意")]),t._v("：开发客户端应用程序时，切记要确保"),r("code",[t._v("Content-Type")]),t._v("在HTTP请求中发送数据时设置头。")]),t._v(" "),r("p",[t._v("如果您未设置内容类型，则大多数客户端将默认使用"),r("code",[t._v("'application/x-www-form-urlencoded'")]),t._v("，这可能不是您想要的。")]),t._v(" "),r("p",[t._v("例如，如果要"),r("code",[t._v("json")]),t._v("使用jQuery和"),r("a",{attrs:{href:"https://api.jquery.com/jQuery.ajax/",target:"_blank",rel:"noopener noreferrer"}},[t._v(".ajax（）方法"),r("OutboundLink")],1),t._v("发送编码数据，则应确保包括该"),r("code",[t._v("contentType: 'application/json'")]),t._v("设置。")]),t._v(" "),r("hr"),t._v(" "),r("h2",{attrs:{id:"设置解析器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#设置解析器"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#setting-the-parsers",target:"_blank",rel:"noopener noreferrer"}},[t._v("设置解析器"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("可以使用该"),r("code",[t._v("DEFAULT_PARSER_CLASSES")]),t._v("设置全局设置默认的解析器集。例如，以下设置将仅允许带有"),r("code",[t._v("JSON")]),t._v("内容的请求，而不是默认的JSON或表单数据。")]),t._v(" "),r("div",{staticClass:"language-python extra-class"},[r("pre",{pre:!0,attrs:{class:"language-python"}},[r("code",[t._v("REST_FRAMEWORK "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DEFAULT_PARSER_CLASSES'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rest_framework.parsers.JSONParser'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),r("p",[t._v("您还可以使用"),r("code",[t._v("APIView")]),t._v("基于类的视图来设置用于单个视图或视图集的解析器。")]),t._v(" "),r("div",{staticClass:"language-python extra-class"},[r("pre",{pre:!0,attrs:{class:"language-python"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" rest_framework"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parsers "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" JSONParser\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" rest_framework"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Response\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" rest_framework"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("views "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" APIView\n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExampleView")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("APIView"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n    A view that can accept POST requests with JSON content.\n    """')]),t._v("\n    parser_classes "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("JSONParser"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" request"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("format")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Response"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'received data'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" request"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),r("p",[t._v("或者，如果您将"),r("code",[t._v("@api_view")]),t._v("装饰器与基于函数的视图一起使用。")]),t._v(" "),r("div",{staticClass:"language-python extra-class"},[r("pre",{pre:!0,attrs:{class:"language-python"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" rest_framework"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("decorators "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" api_view\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" rest_framework"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("decorators "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" parser_classes\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" rest_framework"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parsers "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" JSONParser\n\n"),r("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@api_view")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@parser_classes")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("JSONParser"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("example_view")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("format")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n    A view that can accept POST requests with JSON content.\n    """')]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Response"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'received data'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" request"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),r("hr"),t._v(" "),r("h1",{attrs:{id:"api参考"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#api参考"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#api-reference",target:"_blank",rel:"noopener noreferrer"}},[t._v("API参考"),r("OutboundLink")],1)]),t._v(" "),r("h2",{attrs:{id:"jsonparser"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#jsonparser"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#jsonparser",target:"_blank",rel:"noopener noreferrer"}},[t._v("JSONParser"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("解析"),r("code",[t._v("JSON")]),t._v("请求内容。")]),t._v(" "),r("p",[r("strong",[t._v(".media_type")]),t._v("："),r("code",[t._v("application/json")])]),t._v(" "),r("h2",{attrs:{id:"formparser"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#formparser"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#formparser",target:"_blank",rel:"noopener noreferrer"}},[t._v("FormParser"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("解析HTML表单内容。 "),r("code",[t._v("request.data")]),t._v("将填充"),r("code",[t._v("QueryDict")]),t._v("的数据。")]),t._v(" "),r("p",[t._v("您通常希望同时使用"),r("code",[t._v("FormParser")]),t._v("和两者，"),r("code",[t._v("MultiPartParser")]),t._v("以便完全支持HTML表单数据。")]),t._v(" "),r("p",[r("strong",[t._v(".media_type")]),t._v("："),r("code",[t._v("application/x-www-form-urlencoded")])]),t._v(" "),r("h2",{attrs:{id:"multipartparser"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#multipartparser"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#multipartparser",target:"_blank",rel:"noopener noreferrer"}},[t._v("MultiPartParser"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("解析多部分HTML表单内容，支持文件上传。两者都"),r("code",[t._v("request.data")]),t._v("将填充"),r("code",[t._v("QueryDict")]),t._v("。")]),t._v(" "),r("p",[t._v("您通常希望同时使用"),r("code",[t._v("FormParser")]),t._v("和两者，"),r("code",[t._v("MultiPartParser")]),t._v("以便完全支持HTML表单数据。")]),t._v(" "),r("p",[r("strong",[t._v(".media_type")]),t._v("："),r("code",[t._v("multipart/form-data")])]),t._v(" "),r("h2",{attrs:{id:"fileuploadparser"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#fileuploadparser"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#fileuploadparser",target:"_blank",rel:"noopener noreferrer"}},[t._v("FileUploadParser"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("解析原始文件上传内容。该"),r("code",[t._v("request.data")]),t._v("属性将是一个字典，"),r("code",[t._v("'file'")]),t._v("其中包含包含上载文件的单个键。")]),t._v(" "),r("p",[t._v("如果通过URL关键字参数"),r("code",[t._v("FileUploadParser")]),t._v("调用与with一起使用的视图"),r("code",[t._v("filename")]),t._v("，则该参数将用作文件名。")]),t._v(" "),r("p",[t._v("如果在没有"),r("code",[t._v("filename")]),t._v("URL关键字参数的情况下调用它，则客户端必须在"),r("code",[t._v("Content-Disposition")]),t._v("HTTP标头中设置文件名。例如"),r("code",[t._v("Content-Disposition: attachment; filename=upload.jpg")]),t._v("。")]),t._v(" "),r("p",[r("strong",[t._v(".media_type")]),t._v("："),r("code",[t._v("*/*")])]),t._v(" "),r("h5",{attrs:{id:"笔记"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#笔记"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#notes",target:"_blank",rel:"noopener noreferrer"}},[t._v("笔记："),r("OutboundLink")],1)]),t._v(" "),r("ul",[r("li",[t._v("的"),r("code",[t._v("FileUploadParser")]),t._v("是与本地客户端的使用，可以将文件上传的原始数据请求。对于基于Web的上载，或者对于具有分段上载支持的本机客户端，应使用"),r("code",[t._v("MultiPartParser")]),t._v("代替。")]),t._v(" "),r("li",[t._v("由于此解析器"),r("code",[t._v("media_type")]),t._v("匹配任何内容类型，"),r("code",[t._v("FileUploadParser")]),t._v("因此通常应该是API视图上设置的唯一解析器。")]),t._v(" "),r("li",[r("code",[t._v("FileUploadParser")]),t._v("遵守Django的标准"),r("code",[t._v("FILE_UPLOAD_HANDLERS")]),t._v("设置和"),r("code",[t._v("request.upload_handlers")]),t._v("属性。有关更多详细信息，请参见"),r("a",{attrs:{href:"https://docs.djangoproject.com/en/stable/topics/http/file-uploads/#upload-handlers",target:"_blank",rel:"noopener noreferrer"}},[t._v("Django文档"),r("OutboundLink")],1),t._v("。")])]),t._v(" "),r("h5",{attrs:{id:"基本用法示例"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#基本用法示例"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#basic-usage-example",target:"_blank",rel:"noopener noreferrer"}},[t._v("基本用法示例："),r("OutboundLink")],1)]),t._v(" "),r("div",{staticClass:"language-python extra-class"},[r("pre",{pre:!0,attrs:{class:"language-python"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# views.py")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileUploadView")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("views"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("APIView"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    parser_classes "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("FileUploadParser"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" request"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" filename"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("format")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        file_obj "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'file'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# do some stuff with uploaded file")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Response"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("status"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("204")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# urls.py")]),t._v("\nurlpatterns "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n    url"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("r'^upload/(?P<filename>[^/]+)$'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" FileUploadView"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("as_view"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),r("hr"),t._v(" "),r("h1",{attrs:{id:"自定义解析器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#自定义解析器"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#custom-parsers",target:"_blank",rel:"noopener noreferrer"}},[t._v("自定义解析器"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("要实现自定义解析器，应重写"),r("code",[t._v("BaseParser")]),t._v("，设置"),r("code",[t._v(".media_type")]),t._v("属性并实现"),r("code",[t._v(".parse(self, stream, media_type, parser_context)")]),t._v("方法。")]),t._v(" "),r("p",[t._v("该方法应返回将用于填充"),r("code",[t._v("request.data")]),t._v("属性的数据。")]),t._v(" "),r("p",[t._v("传递给的参数"),r("code",[t._v(".parse()")]),t._v("是：")]),t._v(" "),r("h3",{attrs:{id:"stream"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#stream"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#stream",target:"_blank",rel:"noopener noreferrer"}},[t._v("stream"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("类似于流的对象，表示请求的主体。")]),t._v(" "),r("h3",{attrs:{id:"media-type"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#media-type"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#media_type",target:"_blank",rel:"noopener noreferrer"}},[t._v("media_type"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("可选的。如果提供，这是传入请求内容的媒体类型。")]),t._v(" "),r("p",[t._v("根据请求的"),r("code",[t._v("Content-Type:")]),t._v("header，它可能比渲染器的"),r("code",[t._v("media_type")]),t._v("属性更具体，并且可能包括媒体类型参数。例如"),r("code",[t._v('"text/plain; charset=utf-8"')]),t._v("。")]),t._v(" "),r("h3",{attrs:{id:"parser-context"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#parser-context"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#parser_context",target:"_blank",rel:"noopener noreferrer"}},[t._v("parser_context"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("可选的。如果提供，则此参数将是一个字典，其中包含解析请求内容可能需要的任何其他上下文。")]),t._v(" "),r("p",[t._v("默认情况下，这将包括以下键："),r("code",[t._v("view")]),t._v("，"),r("code",[t._v("request")]),t._v("，"),r("code",[t._v("args")]),t._v("，"),r("code",[t._v("kwargs")]),t._v("。")]),t._v(" "),r("h2",{attrs:{id:"例"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#例"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#example",target:"_blank",rel:"noopener noreferrer"}},[t._v("例"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("下面是一个示例纯文本解析器，它将"),r("code",[t._v("request.data")]),t._v("使用代表请求主体的字符串填充属性。")]),t._v(" "),r("div",{staticClass:"language-python extra-class"},[r("pre",{pre:!0,attrs:{class:"language-python"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PlainTextParser")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BaseParser"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n    Plain text parser.\n    """')]),t._v("\n    media_type "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/plain'")]),t._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stream"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" media_type"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" parser_context"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n        Simply return a string representing the body of the request.\n        """')]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" stream"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("read"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),r("hr"),t._v(" "),r("h1",{attrs:{id:"第三方软件包"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#第三方软件包"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#third-party-packages",target:"_blank",rel:"noopener noreferrer"}},[t._v("第三方软件包"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("以下第三方软件包也可用。")]),t._v(" "),r("h2",{attrs:{id:"yaml"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#yaml"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#yaml",target:"_blank",rel:"noopener noreferrer"}},[t._v("YAML"),r("OutboundLink")],1)]),t._v(" "),r("p",[r("a",{attrs:{href:"https://jpadilla.github.io/django-rest-framework-yaml/",target:"_blank",rel:"noopener noreferrer"}},[t._v("REST框架YAML"),r("OutboundLink")],1),t._v("提供了"),r("a",{attrs:{href:"http://www.yaml.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("YAML"),r("OutboundLink")],1),t._v("解析和渲染支持。它以前直接包含在REST框架程序包中，现在已作为第三方程序包受支持。")]),t._v(" "),r("h4",{attrs:{id:"安装与配置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#安装与配置"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#installation-configuration",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装与配置"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("使用pip安装。")]),t._v(" "),r("div",{staticClass:"language-python extra-class"},[r("pre",{pre:!0,attrs:{class:"language-python"}},[r("code",[t._v("$ pip install djangorestframework"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("yaml\n")])])]),r("p",[t._v("修改您的REST框架设置。")]),t._v(" "),r("div",{staticClass:"language-python extra-class"},[r("pre",{pre:!0,attrs:{class:"language-python"}},[r("code",[t._v("REST_FRAMEWORK "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DEFAULT_PARSER_CLASSES'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rest_framework_yaml.parsers.YAMLParser'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DEFAULT_RENDERER_CLASSES'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rest_framework_yaml.renderers.YAMLRenderer'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),r("h2",{attrs:{id:"xml格式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#xml格式"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#xml",target:"_blank",rel:"noopener noreferrer"}},[t._v("XML格式"),r("OutboundLink")],1)]),t._v(" "),r("p",[r("a",{attrs:{href:"https://jpadilla.github.io/django-rest-framework-xml/",target:"_blank",rel:"noopener noreferrer"}},[t._v("REST Framework XML"),r("OutboundLink")],1),t._v("提供了一种简单的非正式XML格式。它以前直接包含在REST框架程序包中，现在已作为第三方程序包受支持。")]),t._v(" "),r("h4",{attrs:{id:"安装与配置-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#安装与配置-2"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#installation-configuration_1",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装与配置"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("使用pip安装。")]),t._v(" "),r("div",{staticClass:"language-python extra-class"},[r("pre",{pre:!0,attrs:{class:"language-python"}},[r("code",[t._v("$ pip install djangorestframework"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("xml\n")])])]),r("p",[t._v("修改您的REST框架设置。")]),t._v(" "),r("div",{staticClass:"language-python extra-class"},[r("pre",{pre:!0,attrs:{class:"language-python"}},[r("code",[t._v("REST_FRAMEWORK "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DEFAULT_PARSER_CLASSES'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rest_framework_xml.parsers.XMLParser'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DEFAULT_RENDERER_CLASSES'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rest_framework_xml.renderers.XMLRenderer'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),r("h2",{attrs:{id:"消息包"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#消息包"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#messagepack",target:"_blank",rel:"noopener noreferrer"}},[t._v("消息包"),r("OutboundLink")],1)]),t._v(" "),r("p",[r("a",{attrs:{href:"https://github.com/juanriaza/django-rest-framework-msgpack",target:"_blank",rel:"noopener noreferrer"}},[t._v("MessagePack"),r("OutboundLink")],1),t._v("是一种快速，高效的二进制序列化格式。 "),r("a",{attrs:{href:"https://github.com/juanriaza",target:"_blank",rel:"noopener noreferrer"}},[t._v("Juan Riaza"),r("OutboundLink")],1),t._v("维护"),r("a",{attrs:{href:"https://github.com/juanriaza/django-rest-framework-msgpack",target:"_blank",rel:"noopener noreferrer"}},[t._v("djangorestframework-msgpack"),r("OutboundLink")],1),t._v("软件包，该软件包为REST框架提供MessagePack渲染器和解析器支持。")]),t._v(" "),r("h2",{attrs:{id:"camelcase-json"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#camelcase-json"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/parsers/#camelcase-json",target:"_blank",rel:"noopener noreferrer"}},[t._v("CamelCase JSON"),r("OutboundLink")],1)]),t._v(" "),r("p",[r("a",{attrs:{href:"https://github.com/vbabiy/djangorestframework-camel-case",target:"_blank",rel:"noopener noreferrer"}},[t._v("djangorestframework-camel-case"),r("OutboundLink")],1),t._v("提供REST框架"),r("a",{attrs:{href:"https://github.com/vbabiy/djangorestframework-camel-case",target:"_blank",rel:"noopener noreferrer"}},[t._v("的驼峰式"),r("OutboundLink")],1),t._v(" JSON渲染器和解析器。这允许序列化程序使用Python样式的带下划线的字段名称，但在API中以Javascript样式的驼峰式大小写字段名称公开。它由"),r("a",{attrs:{href:"https://github.com/vbabiy",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vitaly Babiy"),r("OutboundLink")],1),t._v("维护。")])])}),[],!1,null,null,null);a.default=s.exports}}]);